# -*- coding: utf-8 -*-
"""
main.py - é©¬å¹´å…ƒå®µç¥ç¦åº”ç”¨ï¼ˆæœ€ç»ˆç‰ˆï¼‰
ç‰ˆæœ¬ï¼šv1.0.21
å¼€å‘å›¢é˜Ÿï¼šå“å½±å·¥ä½œå®¤ Â· ç‘¾ ç…œ
"""

import kivy
import sys
import os
import traceback
from kivy.app import App
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.carousel import Carousel
from kivy.uix.scrollview import ScrollView
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.spinner import Spinner
from kivy.uix.image import Image
from kivy.uix.popup import Popup
from kivy.core.clipboard import Clipboard
from kivy.clock import Clock
from kivy.utils import get_color_from_hex
from kivy.core.window import Window
from kivy.metrics import dp, sp
from kivy.graphics import Color, Rectangle
from kivy.core.text import LabelBase

# ---------- æ³¨å†Œä¸­æ–‡å­—ä½“ ----------
LabelBase.register(name='Chinese', fn_regular='chinese.ttf')

# ---------- å…¨å±€å¼‚å¸¸æ•è· ----------
def handle_exception(exc_type, exc_value, exc_traceback):
    if issubclass(exc_type, KeyboardInterrupt):
        sys.__excepthook__(exc_type, exc_value, exc_traceback)
        return
    try:
        private_dir = os.getenv('ANDROID_PRIVATE', '/sdcard')
        log_path = os.path.join(private_dir, 'crash.log')
        with open(log_path, 'a') as f:
            f.write(''.join(traceback.format_exception(exc_type, exc_value, exc_traceback)))
    except:
        pass

sys.excepthook = handle_exception

Window.clearcolor = get_color_from_hex('#FFF5E6')

# ---------- å¯¼å…¥ jnius ----------
from jnius import autoclass
PythonActivity = autoclass('org.kivy.android.PythonActivity')
Intent = autoclass('android.content.Intent')
Toast = autoclass('android.widget.Toast')
String = autoclass('java.lang.String')
context = PythonActivity.mActivity

def show_toast(message):
    """æ˜¾ç¤º Android åŸç”Ÿ Toast"""
    try:
        Toast.makeText(context, String(message), Toast.LENGTH_SHORT).show()
    except Exception as e:
        print('Toast failed:', e)

def share_text(text):
    """ä½¿ç”¨ Android Intent åˆ†äº«æ–‡æœ¬"""
    try:
        intent = Intent()
        intent.setAction(Intent.ACTION_SEND)
        intent.putExtra(Intent.EXTRA_TEXT, String(text))
        intent.setType('text/plain')
        context.startActivity(Intent.createChooser(intent, String('åˆ†äº«åˆ°')))
        return True
    except Exception as e:
        print('Share failed:', e)
        return False

# ---------- ç¥ç¦è¯­æ•°æ® ----------
# æ˜¥èŠ‚ç¥ç¦è¯­ï¼ˆ5ç±»ï¼Œæ¯ç±»10æ¡ï¼‰
BLESSINGS_SPRING = {
    'å¹½é»˜ææ€ªï¼ˆ10æ¡ï¼‰': [
        "é©¬å¹´åˆ°ï¼Œå¥½è¿â€œé©¬â€ä¸åœè¹„å‘ä½ å¥”æ¥ï¼2026å¹´ï¼Œç¥ä½ æé’±é€Ÿåº¦å ªæ¯”åƒé‡Œé©¬ï¼Œæ‘¸é±¼æŠ€æœ¯ç»ƒå¾—ç‚‰ç«çº¯é’ã€‚ä¸åšèŒåœºç‰›é©¬ï¼Œåªåšå¿«ä¹é‡é©¬ï¼Œé’±åŒ…é¼“é¼“ï¼Œçƒ¦æ¼å…¨æ— ï¼Œå’±ä»¬ç»§ç»­ç›¸çˆ±ç›¸æ€ï¼ğŸ´",
        "ä½ çš„ä¸™åˆé©¬å¹´ä¸“å±å¥½è¿å·²é€è¾¾ï¼Œè¯·ç­¾æ”¶ï¼æ–°çš„ä¸€å¹´ï¼Œä¸»æ‰“ä¸€ä¸ªâ€œé©¬ä¸Šâ€ç³»åˆ—ï¼šé©¬ä¸Šæš´å¯Œï¼Œé©¬ä¸Šå˜ç˜¦ï¼Œé©¬ä¸Šè„±å•ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œé©¬ä¸Šå®ç°è´¢åŠ¡è‡ªç”±ï¼Œå¸¦æˆ‘ä¸€èµ·é£ï¼",
        "å…„å¼Ÿï¼Œé©¬å¹´å¿«ä¹ï¼ç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œå‘é™…çº¿åƒé©¬å°¾ä¸€æ ·æµ“å¯†ï¼Œé“¶è¡Œå¡ä½™é¢åƒé©¬è¹„å£°ä¸€æ ·æ•°ä¸æ¸…ã€‚å·¥ä½œä¸Šä¸€é©¬å½“å…ˆï¼Œé…’æ¡Œä¸Šåƒæ¯ä¸é†‰ï¼Œä»Šå¹´å’±ä»¬å¿…é¡»çº¢çº¢ç«ç«ï¼",
        "é›†ç¾ï¼Œé©¬å¹´å¤§å‰ï¼å¬è¯´é©¬å¹´æ˜¯å’±ä»¬çš„ä¸»åœºï¼Œæ„¿ä½ èƒ¡åƒæµ·å–ä¸é•¿è‚‰ï¼Œç†¬å¤œè¿½å‰§ä¸çˆ†ç—˜ã€‚æ¡ƒèŠ±æœµæœµå¼€ï¼Œçƒ‚æ¡ƒèŠ±æ»šè¿œç‚¹ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½â€œé©¬ä¸Šâ€å‘ç”Ÿåœ¨ä½ èº«ä¸Šï¼",
        "å˜šé©¾ï¼å¥½è¿é©¬æ­£å‘ä½ ç‹‚å¥”ï¼Œè¯·æ³¨æ„é¿è®©çƒ¦æ¼ï¼Œå¼ å¼€åŒè‡‚è¿æ¥æš´å¯Œã€‚2026å¹´ï¼Œå¸Œæœ›ä½ ä¾ç„¶ä¿æŒé‚£ä»½å¤©çœŸï¼Œåƒå°é©¬é©¹ä¸€æ ·åœ¨å¿«ä¹è‰åŸä¸Šæ’’æ¬¢ï¼Œæ°¸è¿œåšä¸ªå¿«ä¹çš„å°å­©ã€‚",
        "é©¬å¹´è®¸æ„¿ï¼šæ„¿ä½ èµšé’±ä¸è´¹åŠ›ï¼Œç”Ÿæ´»ä¸è´¹å¿ƒï¼Œçˆ±æƒ…ä¸è´¹ç¥ã€‚åšä¸€åŒ¹è„±ç¼°çš„é‡é©¬ï¼Œåœ¨è‡ªç”±çš„å¤©åœ°é‡Œé©°éª‹ï¼Œå»å“ªé‡Œéƒ½é¡ºè·¯ï¼Œåšä»€ä¹ˆéƒ½æˆåŠŸï¼",
        "è¿‡å¹´å¥½ï¼é©¬å¹´åˆ°äº†ï¼Œç¥ä½ æ™ºå•†åœ¨çº¿ï¼Œé¢œå€¼çˆ†è¡¨ï¼Œé’±åŒ…é¼“åŒ…ã€‚æ‹’ç»å†…å·ï¼Œæ‹’ç»å†…è€—ï¼Œé©¬åŠ›å…¨å¼€äº«å—ç”Ÿæ´»ï¼ŒæŠŠå»å¹´çš„é—æ†¾éƒ½å˜æˆä»Šå¹´çš„æƒŠå–œï¼",
        "ç‰¹æ‰¹ä½ é©¬å¹´â€œå¸¦è–ªå¿«ä¹â€ä¸€å¹´ï¼æ„¿ä½ åœ¨2026å¹´ï¼Œè€æ¿ä¸æ‰¾èŒ¬ï¼Œå®¢æˆ·ä¸ç£¨å½ï¼ŒåŒäº‹ä¸ç”©é”…ã€‚æ¯å¤©éƒ½æ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ï¼Œæ‰€æœ‰çš„å¥½äº‹éƒ½æ’é˜Ÿæ¥æ‰¾ä½ ï¼",
        "é©¬å¹´åˆ°ï¼Œé€ä½ ä¸€åŒ¹â€œç¥é©¬â€ï¼å®ƒèƒ½é©®ç€ä½ é¿å¼€æ‰€æœ‰å¼¯è·¯ï¼Œç›´è¾¾å¹¸ç¦ç»ˆç‚¹ã€‚ç¥ä½ ä»Šå¹´ä¹°å½©ç¥¨ä¸­å¤´å¥–ï¼Œæ‰“æ¸¸æˆå¿…åƒé¸¡ï¼Œåƒç«é”…æ°¸è¿œæœ‰æ¯›è‚šï¼Œå¿«ä¹åŠ å€ï¼",
        "è™½ç„¶ä½ ä¸å±é©¬ï¼Œä½†æˆ‘ç¥ä½ é©¬å¹´â€œé©¬â€åŠ›åè¶³ï¼è¿½å¾—ä¸Šé«˜é“ï¼Œå“„å¾—å¥½çˆ±äººï¼Œæ‰“å¾—è¿‡ç”Ÿæ´»çš„å°æ€ªå…½ã€‚2026ï¼Œå’±ä»¬ä¸€èµ·ç­–é©¬å¥”è…¾ï¼Œæ´»å¾—æ½‡æ½‡æ´’æ´’ï¼"
    ],
    'æ·±æƒ…èµ°å¿ƒï¼ˆ10æ¡ï¼‰': [
        "å²æœˆåŒ†åŒ†ï¼Œåˆæ˜¯ä¸€å¹´ã€‚åœ¨è¿™ä¸ªå–œåº†çš„é©¬å¹´æ˜¥èŠ‚ï¼Œç‰¹æ„ç»™ä½ å‘å»è¿™æ¡ç¥ç¦ã€‚æ„Ÿè°¢ä½ è¿™ä¹ˆå¤šå¹´çš„é™ªä¼´ä¸åŒ…å®¹ï¼Œæ— è®ºè·ç¦»è¿œè¿‘ï¼Œä½ æ°¸è¿œæ˜¯æˆ‘å¿ƒé‡Œæœ€é‡è¦çš„äººã€‚æ„¿ä½ é©¬å¹´å¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ã€‚",
        "é©¬è¹„å£°å£°ï¼Œè¸ç¢æ—§å²çš„å°˜åŸƒï¼Œè¿æ¥æ–°å²çš„æ›™å…‰ã€‚å¾ˆåº†å¹¸ï¼Œæ–°çš„ä¸€å¹´ä¾ç„¶æœ‰ä½ åœ¨èº«è¾¹ã€‚2026ä¸™åˆå¹´ï¼Œæ„¿æˆ‘ä»¬çš„æƒ…è°Šå¦‚éªé©¬èˆ¬åšéŸ§ï¼Œå¦‚è€é…’èˆ¬é†‡åšã€‚æ–°å¹´å¿«ä¹ï¼Œæˆ‘çš„è€æœ‹å‹ã€‚",
        "è·ç¦»é˜»æŒ¡ä¸äº†ç¥ç¦çš„è„šæ­¥ï¼Œé©¬å¹´çš„é’Ÿå£°å·²ç»æ•²å“ã€‚è¿œæ–¹çš„ä½ ï¼Œè¿˜å¥½å—ï¼Ÿå¸Œæœ›è¿™æ¡ä¿¡æ¯èƒ½ç»™ä½ å¸¦å»ä¸€ä¸æ¸©æš–ã€‚æ„¿ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæœ‰äººçˆ±ï¼Œæœ‰äº‹åšï¼Œæœ‰æ‰€æœŸå¾…ï¼Œæ‰€æœ‰çš„å¥”èµ´éƒ½æœ‰æ„ä¹‰ã€‚",
        "äº²çˆ±çš„ï¼Œé©¬å¹´å¿«ä¹ï¼è¿™æ˜¯æˆ‘ä»¬ä¸€èµ·åº¦è¿‡çš„åˆä¸€ä¸ªæ˜¥èŠ‚ã€‚æ„¿ä½ åœ¨2026å¹´ï¼Œæ—¢æœ‰ç­–é©¬å¥”è…¾çš„è±ªæƒ…ï¼Œä¹Ÿæœ‰ç»†å—…è”·è–‡çš„æ¸©æŸ”ã€‚ä¸ç®¡æœªæ¥å¦‚ä½•ï¼Œæˆ‘éƒ½ä¼šé™ªä½ ä¸€èµ·ï¼Œçœ‹éä¸–é—´é£æ™¯ã€‚",
        "æ—¶å…‰ä¸è€ï¼Œæˆ‘ä»¬ä¸æ•£ã€‚é©¬å¹´åˆ°äº†ï¼Œç»™ä½ æ‹œä¸ªå¹´ã€‚æ„¿ä½ åœ¨è¿™ä¸ªå……æ»¡æ´»åŠ›çš„å¹´ä»½é‡Œï¼Œä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚ç´¯äº†å°±åœä¸‹æ¥æ­‡æ­‡ï¼Œæˆ‘æ°¸è¿œæ˜¯ä½ å¯ä»¥åœé çš„æ¸¯æ¹¾ã€‚",
        "è¿˜è®°å¾—å°æ—¶å€™ä¸€èµ·æ”¾é­ç‚®çš„æ—¥å­å—ï¼Ÿè½¬çœ¼åˆæ˜¯é©¬å¹´ã€‚è™½ç„¶ç°åœ¨å„å¿™å„çš„ï¼Œä½†å¿ƒé‡Œçš„ç‰µæŒ‚ä»æœªå‡å°‘ã€‚ç¥ä½ å’Œå®¶äººæ–°æ˜¥å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦ï¼Œå¸Œæœ›å’±ä»¬ä»Šå¹´èƒ½å¤šèšèšï¼",
        "æ–°æ˜¥ä½³èŠ‚ï¼Œæœ€æƒ³å¿µçš„è¿˜æ˜¯ä½ ã€‚æ„¿ä½ é©¬å¹´è¡Œå¤§è¿ï¼ŒæŠŠè¿‡å»ä¸€å¹´çš„ç–²æƒ«éƒ½å¸ä¸‹ï¼ŒæŠŠæ‰€æœ‰çš„å¸Œæœ›éƒ½è£…æ»¡ã€‚æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±ï¼Œè„šä¸‹æœ‰è·¯ï¼Œä¸€ç”Ÿå‘é˜³ã€‚",
        "æ¯åˆ°è¿‡å¹´ï¼Œæœ€å¼€å¿ƒçš„å°±æ˜¯ç»™ä½ å‘ç¥ç¦ã€‚2026æ˜¯é©¬å¹´ï¼Œè±¡å¾ç€å¥”è…¾ä¸å¸Œæœ›ã€‚æ„¿ä½ åƒåƒé‡Œé©¬ä¸€æ ·ï¼Œå¥”å‘å±äºè‡ªå·±çš„æ˜Ÿè¾°å¤§æµ·ã€‚æ— è®ºä½•æ—¶ï¼Œè®°å¾—ç…§é¡¾å¥½è‡ªå·±ï¼Œæ–°å¹´å¿«ä¹ï¼",
        "ä¸€ä»½ç¥ç¦ï¼Œä¸€ä»½ç‰µæŒ‚ã€‚åœ¨è¿™ä¸ªé‡‘é©¬è´ºå²çš„æ—¥å­é‡Œï¼Œæ„¿ä½ æ‰€æœ‰çš„æ¢¦æƒ³éƒ½èƒ½â€œé©¬ä¸Šâ€å¼€èŠ±ç»“æœã€‚æ„Ÿè°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œï¼Œç¥ä½ é©¬å¹´å‰ç¥¥ï¼Œå¹¸ç¦å®‰åº·ï¼Œå²å²å¹´å¹´å¸¸ç›¸è§ã€‚",
        "æ—§å²å·²å±•åƒé‡é”¦ï¼Œæ–°å¹´å†è¿›ç™¾å°ºç«¿ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæ”¶è·æ»¡æ»¡çš„å¹¸ç¦ã€‚ä¸ç®¡ä¸–ç•Œæ€ä¹ˆå˜ï¼Œæˆ‘çš„ç¥ç¦æ°¸è¿œä¸å˜ã€‚æ˜¥èŠ‚å¿«ä¹ï¼Œå¹³å®‰é¡ºé‚ï¼"
    ],
    'æ–‡è‰ºå”¯ç¾ï¼ˆ10æ¡ï¼‰': [
        "æ˜¥é£å¾—æ„é©¬è¹„ç–¾ï¼Œä¸€æ—¥çœ‹å°½é•¿å®‰èŠ±ã€‚2026ä¸™åˆé©¬å¹´ï¼Œæ„¿ä½ é˜…å°½ä¸–é—´ç¾å¥½ï¼Œä¸è´ŸéŸ¶åã€‚åœ¨å¥”èµ´æœªæ¥çš„è·¯ä¸Šï¼Œæ—¢æœ‰ç­–é©¬æ‰¬é­çš„å‹‡æ°”ï¼Œä¹Ÿæœ‰è€é©¬è¯†é€”çš„æ™ºæ…§ã€‚æ–°å¹´å¿«ä¹ï¼ğŸŒ¸",
        "é‡‘é©¬è¸æ˜¥ï¼Œä¸‡ç‰©å¤è‹ã€‚æ„¿ä½ åœ¨è¿™ä¸ªç”Ÿæœºå‹ƒå‹ƒçš„å¹´ä»½é‡Œï¼Œå¦‚éªé©¬èˆ¬é©°éª‹ï¼Œè¶Šè¿‡å±±ä¸˜ï¼Œé‡è§å½©è™¹ã€‚æ„¿ä½ å†ç»åƒå¸†ï¼Œå½’æ¥ä»æ˜¯å°‘å¹´ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œçœ¼åº•æœ‰å…‰ã€‚",
        "é©¬è¹„è¸ç¢æ—§å¹´éœœï¼Œæ˜¥é£é€æ¥æ–°å²å…‰ã€‚æ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ å¿ƒæœ‰æš–é˜³ï¼Œä½•æƒ§é£éœœã€‚åœ¨æ—¶å…‰çš„æ—·é‡é‡Œï¼Œç­–é©¬å¥”è…¾ï¼Œä»¥æ­¤å¯ç¨‹ï¼Œå±±æ²³è¿œé˜”ï¼Œäººé—´å€¼å¾—ã€‚",
        "å²åºæ›´æ›¿ï¼Œåç« æ—¥æ–°ã€‚é©¬å¹´åˆ°äº†ï¼Œæ„¿ä½ æ‹¥æœ‰â€œéªéª¥ä¸€è·ƒâ€çš„çˆ†å‘åŠ›ï¼Œä¹Ÿæœ‰â€œé©½é©¬åé©¾â€çš„åšæŒã€‚è„šè¸å®åœ°ï¼Œç»ˆæŠµæ˜Ÿæ²³ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½å°†å¦‚æœŸè€Œè‡³ã€‚",
        "æ„¿ä½ æœ‰éªé©¬é©°éª‹çš„è‡ªç”±ï¼Œä¹Ÿæœ‰è€é©¬è¯†é€”çš„ä»å®¹ã€‚2026å¹´ï¼Œæ„¿ä½ ä¸”æ­Œä¸”è¡Œï¼Œä¸€è·¯ç”ŸèŠ±ã€‚å°†è¿‡å¾€çš„é—æ†¾åŒ–ä½œæ˜¥æ³¥ï¼Œæ»‹å…»å‡ºæ–°å¹´çš„ç¹èŠ±ä¼¼é”¦ã€‚",
        "çƒŸç«èµ·ï¼Œç…§äººé—´ï¼Œå–œæ‚¦æ— è¾¹ï¼Œä¸¾æ¯æ•¬æ­¤å¹´ã€‚é©¬å¹´æ–°æ˜¥ï¼Œæ„¿ä½ ä¸‰é¤å››å­£æ¸©æš–æœ‰è¶£ï¼Œç”Ÿæ´»å¦‚æ—‹è½¬æœ¨é©¬èˆ¬å……æ»¡æµªæ¼«ã€‚å¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ï¼Œå–œä¹é•¿å®‰ã€‚",
        "å‡›å†¬æ•£å°½ï¼Œæ˜Ÿæ²³é•¿æ˜ã€‚åœ¨è¿™ä¸ªé©¬å¹´ï¼Œæ„¿ä½ ç­–é©¬æ‰¬é­ï¼Œå¥”èµ´å±±æµ·ã€‚ä¸æ‹è¿‡å¾€ï¼Œä¸ç•å°†æ¥ï¼Œåœ¨è‡ªå·±çš„èŠ‚å¥é‡Œï¼Œæ´»æˆè‡ªå·±å–œæ¬¢çš„æ ·å­ã€‚",
        "ä»¥æ¢¦ä¸ºé©¬ï¼Œä¸è´ŸéŸ¶åã€‚2026å¹´ï¼Œæ„¿ä½ åœ¨è¿½æ¢¦çš„è·¯ä¸Šï¼Œä¸€é©¬å½“å…ˆï¼Œé©¬åˆ°æˆåŠŸã€‚å³ä½¿å‰è·¯æ¼«æ¼«ï¼Œä¹Ÿè¦å‹‡å¾€ç›´å‰ï¼Œå› ä¸ºç¾å¥½çš„äº‹ç‰©éƒ½å€¼å¾—ç­‰å¾…ã€‚",
        "æ–°å¹´çš„é’Ÿå£°ï¼Œæ˜¯å¯ç¨‹çš„å·è§’ã€‚æ„¿ä½ å¦‚éªé©¬èˆ¬ï¼ŒæŒ£è„±æŸç¼šï¼Œå¥”å‘è‡ªç”±ã€‚æ„¿ä½ çš„ä¸–ç•Œï¼Œæ—¢æœ‰çƒŸç«ä¿—å¸¸ï¼Œä¹Ÿæœ‰è¯—æ„æ¸…æ¬¢ï¼Œé©¬å¹´å¤§å‰ï¼",
        "é²œè¡£æ€’é©¬å°‘å¹´æ—¶ï¼Œä¸è´ŸéŸ¶åè¡Œä¸”çŸ¥ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥ä½ æ„æ°”é£å‘ï¼Œå‰ç¨‹ä¼¼é”¦ã€‚æ„¿ä½ æ‰€æœ‰çš„åŠªåŠ›éƒ½ä¸è¢«è¾œè´Ÿï¼Œæ‰€æœ‰çš„æœŸå¾…éƒ½èƒ½è½åœ°ç”Ÿæ ¹ã€‚"
    ],
    'äº‹ä¸šæé’±ï¼ˆ10æ¡ï¼‰': [
        "Xæ€»ï¼Œé©¬å¹´å¤§å‰ï¼ç»™æ‚¨å’Œå®¶äººæ‹œå¹´äº†ã€‚æ„Ÿè°¢è¿‡å»ä¸€å¹´å¯¹æˆ‘çš„ææºä¸ä¿¡ä»»ã€‚2026å¹´ï¼Œç¥æ‚¨ç­–é©¬æ‰¬é­å†åˆ›è¾‰ç…Œï¼Œäº‹ä¸šå¦‚éªé©¬å¥”è…¾ï¼ŒåŠ¿ä¸å¯æŒ¡ï¼æ„¿å…¬å¸ä¸šç»©ä¸€é©¬å½“å…ˆï¼Œè´¢æºä¸‡é©¬å¥”è…¾ï¼",
        "ç‹ç»ç†ï¼Œæ–°å¹´å¥½ï¼é‡‘é©¬è´ºå²ï¼Œå•†æœºæ— é™ã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„æ”¯æŒä¸å…³ç…§ã€‚ç¥æ‚¨é©¬å¹´è¡Œå¤§è¿ï¼Œè´¢è¿äº¨é€šï¼Œç”Ÿæ„å…´éš†ï¼æ„¿æˆ‘ä»¬åœ¨æ–°çš„ä¸€å¹´é‡Œç»§ç»­å¹¶é©¾é½é©±ï¼Œæºæ‰‹å…±èµ¢ï¼",
        "äº²çˆ±çš„åŒäº‹ï¼Œé©¬å¹´å¿«ä¹ï¼è¿‡å»ä¸€å¹´ï¼Œæ„Ÿè°¢æœ‰ä½ å¹¶è‚©ä½œæˆ˜ã€‚2026å¹´ï¼Œæ„¿æˆ‘ä»¬å·¥ä½œä¸Šä¸€é©¬å½“å…ˆï¼Œé…åˆé»˜å¥‘ï¼›ç”Ÿæ´»ä¸Šé¾™é©¬ç²¾ç¥ï¼Œå¤šå§¿å¤šå½©ã€‚ç¥ä½ å‡èŒåŠ è–ªâ€œé©¬ä¸Šâ€å…‘ç°ï¼Œå¹´ç»ˆå¥–æ‹¿åˆ°æ‰‹è½¯ï¼",
        "åˆ›ä¸šä¼™ä¼´ï¼Œæ–°æ˜¥å¿«ä¹ï¼å‰å…µç§£é©¬åˆä¸€å¹´ï¼Œé©¬å¹´æ˜¯æˆ‘ä»¬å¤§å±•å®å›¾çš„å¥½æ—¶æœºã€‚æ„¿ä½ åœ¨å•†æµ·ä¸­ç­–é©¬å¥”è…¾ï¼Œç‹¬å é³Œå¤´ï¼æ‰€æœ‰çš„é¡¹ç›®éƒ½é©¬åˆ°æˆåŠŸï¼Œæ‰€æœ‰çš„ä»˜å‡ºéƒ½èƒ½æ¢æ¥ä¸°åšçš„å›æŠ¥ã€‚",
        "ç¥ä½ é©¬å¹´äº‹ä¸šæ­¥æ­¥é«˜å‡ï¼2026å¹´ï¼Œæ„¿ä½ èŒåœºä¹‹è·¯ä¸€é©¬å¹³å·ï¼Œæ²¡æœ‰åå·ã€‚é‡åˆ°å¥½æœºé‡è¦ä¸€é©¬å½“å…ˆï¼ŒæŠ“ä½å¥½è¿æ°”è¦é©¬ä¸åœè¹„ã€‚æ„¿ä½ æ—©æ—¥å®ç°è´¢å¯Œè‡ªç”±ï¼Œäº‹ä¸šçˆ±æƒ…åŒä¸°æ”¶ï¼",
        "é©¬å¹´åˆ°ï¼Œå¥½è¿ç…§ï¼ç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œä¸šç»©çªé£çŒ›è¿›ï¼Œèƒ½åŠ›ä¸€æ—¥åƒé‡Œã€‚åœ¨è¿™ä¸ªå……æ»¡æ´»åŠ›çš„å¹´ä»½é‡Œï¼Œæ„¿ä½ é©¬åŠ›å…¨å¼€ï¼Œæå®šæ‰€æœ‰éš¾é¢˜ï¼Œæˆä¸ºè¡Œä¸šé‡Œçš„åƒé‡Œé©¬ï¼",
        "å¼€å·¥å¤§å‰ï¼ˆé¢„ç¥ï¼‰ï¼é©¬å¹´æ–°æ°”è±¡ï¼Œæ„¿ä½ åœ¨å·¥ä½œä¸­å¦‚é±¼å¾—æ°´ï¼Œå¦‚éªé©¬å¥”è…¾ã€‚ä¸ä»…è¦â€œé©¬â€ä¸Šæœ‰é’±ï¼Œæ›´è¦â€œé©¬â€ä¸Šæœ‰é—²ã€‚ç¥ä½ å·¥ä½œé¡ºåˆ©ï¼Œèº«ä½“å¥åº·ï¼Œä¸‡äº‹é¡ºå¿ƒï¼",
        "è‡´æ­£åœ¨æ±‚èŒçš„ä½ ï¼šé©¬å¹´æ˜¯è½¬è¿å¹´ï¼æ„¿ä½ åƒåƒé‡Œé©¬ä¸€æ ·ï¼Œæ—©æ—¥é‡åˆ°èµè¯†ä½ çš„ä¼¯ä¹ã€‚æ±‚èŒä¹‹è·¯ä¸€é©¬å¹³å·ï¼Œé¢è¯•é‚€çº¦é©¬ä¸åœè¹„ï¼Œæ—©æ—¥æ‹¿åˆ°å¿ƒä»ªçš„Offerï¼Œå¼€å¯äººç”Ÿæ–°ç¯‡ç« ï¼",
        "ç”µå•†åŒè¡Œï¼Œé©¬å¹´å‘è´¢ï¼ç¥ä½ åº—é“ºæµé‡ä¸€é©¬å½“å…ˆï¼Œé”€é‡ä¸‡é©¬å¥”è…¾ã€‚æ‰€æœ‰çš„çˆ†æ¬¾éƒ½â€œé©¬ä¸Šâ€å‡ºï¼Œæ‰€æœ‰çš„è®¢å•éƒ½â€œé©¬ä¸Šâ€å‘ã€‚æ„¿ä½ 2026å¹´èµšå¾—ç›†æ»¡é’µæ»¡ï¼",
        "è‡ªç”±èŒä¸šè€…ï¼Œæ–°å¹´å¿«ä¹ï¼é©¬å¹´æ„¿ä½ çµæ„Ÿå¦‚æ³‰æ¶Œï¼Œå®¢æˆ·æ’é˜Ÿæ¥ã€‚æ„¿ä½ ç­–é©¬å¥”è…¾åœ¨è‡ªç”±çš„èŒä¸šå¤©åœ°é‡Œï¼Œæ”¶å…¥ç¿»å€ï¼Œæ—¶é—´è‡ªç”±ï¼Œæ´»æˆè‡ªå·±æœ€å–œæ¬¢çš„æ ·å­ï¼"
    ],
    'é•¿è¾ˆå®‰åº·ï¼ˆ10æ¡ï¼‰': [
        "çˆ¸å¦ˆï¼Œé©¬å¹´å¿«ä¹ï¼ä»Šå¤©æ˜¯å¤§å¹´åˆä¸€ï¼Œå­©å„¿ç»™äºŒè€æ‹œå¹´äº†ã€‚ä¸™åˆå¹´è±¡å¾ç€æ´»åŠ›ä¸å¥åº·ï¼Œæ„¿è¿™è‚¡ç‘æ°”æ°¸è¿œå›´ç»•ç€ä½ ä»¬ã€‚å¸Œæœ›çˆ¸å¦ˆé¾™é©¬ç²¾ç¥ï¼Œèº«ä½“ç¡¬æœ—ï¼Œåƒå¾—é¦™ç¡å¾—å¥½ï¼Œæˆ‘åœ¨å¤–ä¸€åˆ‡éƒ½å¥½ï¼Œå‹¿å¿µï¼",
        "çˆ·çˆ·å¥¶å¥¶ï¼Œç»™æ‚¨äºŒè€ç£•å¤´æ‹œå¹´å•¦ï¼é©¬è¹„å£°å£°æŠ¥å¹³å®‰ï¼Œç‘é›ªçº·é£å…†ä¸°å¹´ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥æ‚¨ç¦å¦‚ä¸œæµ·é•¿æµæ°´ï¼Œå¯¿æ¯”å—å±±ä¸è€æ¾ã€‚æ„¿æ‚¨äºŒè€ç²¾ç¥çŸé“„ï¼Œç¬‘å£å¸¸å¼€ï¼Œæ¯å¤©éƒ½å¼€å¼€å¿ƒå¿ƒï¼",
        "å”å”é˜¿å§¨ï¼Œæ–°å¹´å¥½ï¼é‡‘é©¬è´ºå²ï¼Œå–œæ°”æ´‹æ´‹ã€‚ç¥æ‚¨å…¨å®¶é©¬å¹´å¤§å‰å¤§åˆ©ï¼æ–°çš„ä¸€å¹´ï¼Œæ„¿æ‚¨èº«ä½“åº·å¥ï¼Œé¾™é©¬ç²¾ç¥ï¼›äº‹ä¸šé¡ºå¿ƒï¼Œé©¬åˆ°æˆåŠŸï¼›å®¶åº­å’Œç¦ï¼Œå…¶ä¹èèã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„å…³å¿ƒï¼",
        "å¤–å…¬å¤–å©†ï¼Œæ˜¥èŠ‚å¿«ä¹ï¼é©¬å¹´åˆ°äº†ï¼Œç»™æ‚¨é€æ¥æœ€çœŸæŒšçš„ç¥ç¦ã€‚æ„¿æ‚¨äºŒè€åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œè…¿è„šçµä¾¿ï¼Œåƒéªé©¬ä¸€æ ·æœ‰æ´»åŠ›ã€‚æƒ³åƒå•¥å°±åƒå•¥ï¼Œæƒ³ç©å•¥å°±ç©å•¥ï¼Œå²æœˆé™å¥½ï¼Œå¥åº·å¸¸ä¼´ï¼",
        "èˆ…èˆ…ï¼Œé©¬å¹´å‰ç¥¥ï¼ç¥æ‚¨å’Œèˆ…å¦ˆæ–°æ˜¥å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦ã€‚æ„¿æ‚¨åœ¨2026å¹´ï¼Œç”Ÿæ„å…´éš†é€šå››æµ·ï¼Œè´¢æºèŒ‚ç››è¾¾ä¸‰æ±Ÿã€‚èº«ä½“å¥å¥åº·åº·ï¼Œå¿ƒæƒ…èˆ’èˆ’ç•…ç•…ï¼Œä¸‡äº‹çš†å¦‚æ„ï¼",
        "å§‘å§‘ï¼Œè¿‡å¹´å¥½ï¼é‡‘é©¬çº³ç¦ï¼Œå¥½è¿è¿è¿ã€‚ç¥æ‚¨é©¬å¹´è¡Œå¤§è¿ï¼Œèº«ä½“å€å„¿æ£’ï¼Œæ°”è‰²çº¢æ¶¦ã€‚æ„¿æ‚¨çš„é€€ä¼‘ç”Ÿæ´»ä¸°å¯Œå¤šå½©ï¼Œåƒåƒé‡Œé©¬ä¸€æ ·é©°éª‹åœ¨å¿«ä¹çš„è‰åŸä¸Šï¼Œå»æƒ³å»çš„åœ°æ–¹ï¼Œçœ‹æƒ³çœ‹çš„é£æ™¯ã€‚",
        "è‡´å°Šæ•¬çš„é•¿è¾ˆï¼šæ–°æ˜¥ä½³èŠ‚ï¼Œç»™æ‚¨æ‹œå¹´äº†ã€‚ç¥æ‚¨é©¬å¹´é¾™é©¬ç²¾ç¥ï¼Œç¦å¯¿å®‰åº·ã€‚æ„¿æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œè¿œç¦»ç–¾ç—…ï¼Œè¿œç¦»çƒ¦æ¼ï¼Œå„¿å­™ç»•è†ï¼Œå°½äº«å¤©ä¼¦ä¹‹ä¹ã€‚2026å¹´ï¼Œå¹³å®‰å–œä¹ï¼",
        "è€å¸ˆï¼Œé©¬å¹´å¿«ä¹ï¼æ„Ÿè°¢æ‚¨çš„è°†è°†æ•™è¯²ï¼Œæ‚¨è¾›è‹¦äº†ã€‚ç¥æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæ¡ƒææ»¡å¤©ä¸‹ï¼Œæ˜¥æ™–éå››æ–¹ã€‚æ„¿æ‚¨èº«ä½“ç¡¬æœ—ï¼Œç²¾ç¥é¥±æ»¡ï¼Œç»§ç»­åœ¨æ•™è‚²çš„è‰åŸä¸Šç­–é©¬å¥”è…¾ï¼ŒåŸ¹è‚²æ›´å¤šåƒé‡Œé©¬ï¼",
        "é€€ä¼‘çš„å¤§ä¼¯ï¼Œæ–°å¹´å¥½ï¼é©¬å¹´åˆ°äº†ï¼Œç¥æ‚¨é€€ä¼‘ç”Ÿæ´»æ›´åŠ ç²¾å½©ã€‚æ„¿æ‚¨é¾™é©¬ç²¾ç¥ï¼Œç§¯æä¹è§‚ã€‚æ²¡äº‹å…»å…»èŠ±ã€é›é›é¸Ÿï¼Œäº«å—æ‚ é—²æ—¶å…‰ã€‚ç¥æ‚¨ç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ï¼",
        "è‡´å®¶æ—é•¿è¾ˆï¼šé‡‘é©¬è¿æ˜¥ï¼Œç¦æ°”ç›ˆé—¨ã€‚åœ¨è¿™ä¸ªå–œåº†çš„æ—¥å­é‡Œï¼Œç¥æ‚¨å’Œå®¶äººé©¬å¹´å¤§å‰ï¼æ„¿æ‚¨èº«ä½“å®‰åº·ï¼Œç²¾ç¥çŸé“„ï¼›å®¶åº­å’Œç¦ï¼Œä¸‡äº‹å…´æ—ºã€‚æ„¿æ‚¨å²å²æœ‰ä»Šæœï¼Œå¹´å¹´å¦‚ä»Šæ—¥ï¼"
    ]
}

# å…ƒå®µèŠ‚ç¥ç¦è¯­ï¼ˆ5ç±»ï¼Œæ¯ç±»10æ¡ï¼‰
BLESSINGS_LANTERN = {
    'æ¸©é¦¨å›¢åœ†ï¼ˆ10æ¡ï¼‰': [
        "å…ƒå®µè‰¯è¾°è‡³ï¼Œç¯ç«ç…§äººé—´ï¼Œåœ†æœˆå½“ç©ºï¼Œæ±¤åœ†é¦™ç”œï¼Œæ„¿ä¸€å®¶äººå¹³å®‰ç›¸ä¼´ã€å–œä¹ç›¸éšï¼Œæ—¥å­æœ‰ç›¼å¤´ï¼Œç”Ÿæ´»æœ‰æ¸©æš–ï¼Œå²å²å¸¸å›¢åœ†ï¼Œå¹´å¹´çš†å®‰åº·ã€‚",
        "ç¯ç«æ˜ ä¸‡å®¶ï¼Œå›¢åœ†å…±æ­¤æ—¶ï¼Œåˆæ˜¯ä¸€å¹´å…ƒå®µèŠ‚ï¼Œæ„¿æ˜¥é£å¹èµ°æ‰€æœ‰çƒ¦æ¼ï¼Œæœˆå…‰ç…§äº®æ‰€æœ‰ç¾å¥½ï¼Œå®¶äººé—²åï¼Œç¯ç«å¯äº²ï¼Œæ‰€æ±‚çš†å¦‚æ„¿ï¼Œæ‰€è¡Œçš†å¦é€”ã€‚",
        "æœˆåœ†äººåœ†äº‹äº‹åœ†ï¼ŒèŠ±å¥½ç¯å¥½å¹´å¹´å¥½ï¼Œæ„¿ä½ åœ¨è¿™ä¸ªæ¸©æš–çš„èŠ‚æ—¥é‡Œï¼Œæœ‰å®¶äººé™ªä¼´ï¼Œæœ‰æœ‹å‹å…³å¿ƒï¼Œæœ‰å¥åº·èº«ä½“ï¼Œæœ‰é¡ºé‚ç”Ÿæ´»ï¼Œå¹¸ç¦å¸¸åœ¨èº«è¾¹ï¼Œå¹³å®‰å²å²å¹´å¹´ã€‚",
        "ä¸€ç›èŠ±ç¯å¯„æ·±æƒ…ï¼Œä¸€ç¢—æ±¤åœ†æš–äººå¿ƒï¼Œæ„¿ä½ èµ°è¿‡å±±æ²³ä¸‡é‡Œï¼Œä»æœ‰äººç­‰ä½ å›å®¶ï¼›å†ç»äººé—´çƒŸç«ï¼Œä¾æ—§çœ¼é‡Œæœ‰å…‰ã€å¿ƒä¸­æœ‰çˆ±ï¼Œä¸€ç”Ÿè¢«æ¸©æŸ”ä»¥å¾…ã€‚",
        "å…ƒå®µä¹‹å¤œæœˆè‰²æ¸©æŸ”ï¼Œç¯ç«ç’€ç’¨ï¼Œæ„¿æ‰€æœ‰æ€å¿µéƒ½æœ‰å›åº”ï¼Œæ‰€æœ‰ç‰µæŒ‚éƒ½æœ‰å½’å®¿ï¼Œæ„¿å®¶äººå¹³å®‰å¥åº·ï¼Œæ—¥å­å®‰ç¨³èˆ’å¿ƒï¼Œç”Ÿæ´»æœ‰æ»‹æœ‰å‘³ï¼Œå²å²æ— å¿§æ— æ„ã€‚",
        "æœˆåœ†æ˜ å›¢åœ†ï¼Œç¯ç«ç…§å¿ƒå®‰ï¼Œæ„¿æ–°çš„ä¸€å¹´é‡Œï¼Œå®¶åº­å’Œç¦ã€ç¬‘è¯­å¸¸ä¼´ï¼Œçƒ¦æ¼éšé£è€Œå»ï¼Œå¥½è¿æ­¥æ­¥é è¿‘ï¼Œç”Ÿæ´»å¦‚æ±¤åœ†èˆ¬åœ†æ»¡ï¼Œæ—¥å­å¦‚æ˜¥å¤œèˆ¬æ¸©æŸ”ã€‚",
        "èŠ±ç¯åƒç›é€ç¾å¥½ï¼Œåœ†æœˆä¸€è½®ç…§äººé—´ï¼Œæ„¿ä½ å’Œå®¶äººåœ¨è¿™ä¸ªå…ƒå®µä½³èŠ‚ï¼Œå¹³å®‰ç›¸ä¼´ã€å–œä¹ç›¸éšï¼Œå¿ƒä¸­å¸¸æ€€å¸Œæœ›ï¼Œçœ¼å‰çš†æ˜¯å…‰æ˜ï¼Œä½™ç”Ÿçš†æœ‰æ¸©æš–ã€‚",
        "è‰¯å®µå…±åº¦ï¼Œå›¢åœ†éš¾å¾—ï¼Œæ„¿æ—¶å…‰æ…¢ä¸€ç‚¹ï¼Œæ¸©æŸ”å¤šä¸€ç‚¹ï¼Œå¹¸ç¦ä¹…ä¸€ç‚¹ï¼Œå¥åº·é•¿ä¸€ç‚¹ï¼Œæ„¿ä¸€å®¶äººå¹³å¹³å®‰å®‰ï¼Œä¸€å¹´äº‹é¡ºé¡ºåˆ©åˆ©ï¼Œä¸€ç”Ÿå¿ƒæ¬¢æ¬¢å–œå–œã€‚",
        "å…ƒå®µä½³èŠ‚ï¼Œæš–æ„èèï¼Œæ„¿ä½ ä¸‰é¤å››å­£çš†å®‰ç¨³ï¼Œå²å²å¹´å¹´çš†æ— å¿§ï¼Œæœ‰äººæ‡‚ä½ æ‚²æ¬¢ï¼Œæœ‰äººé™ªä½ æœå¤•ï¼Œç”Ÿæ´»ä¸æ…Œä¸å¿™ï¼Œå¹¸ç¦å¦‚çº¦è€Œè‡³ã€‚",
        "ç¯ç«é˜‘çŠå¤„ï¼Œæœ€æš–æ˜¯äººé—´ï¼Œæ„¿ä½ æ­¤å¤œæœ‰å›¢åœ†ï¼Œæ­¤ç”Ÿæœ‰å®‰ç¨³ï¼Œå¹´å¹´å…ƒå®µå¹´å¹´å–œï¼Œå²å²å¹³å®‰å²å²æ¬¢ï¼Œç¦æ°”å¸¸æ»¡ï¼Œå¥½è¿å¸¸ä¼´ï¼Œå–œä¹å¸¸å­˜ã€‚"
    ],
    'å–œåº†å‰åˆ©ï¼ˆ10æ¡ï¼‰': [
        "å…ƒå®µèŠ±ç¯ç…§å‰ç¨‹ï¼Œæ˜¥é£å¦‚æ„ä¼´å›è¡Œï¼Œæ„¿ä½ æ–°å²è´¢æºå¹¿ã€ç¦æ°”å¤šã€å¥½è¿é•¿ã€ä¸‡äº‹é¡ºï¼Œäº‹ä¸šæ­¥æ­¥é«˜å‡ï¼Œç”Ÿæ´»é¡ºå¿ƒå¦‚æ„ï¼Œæ—¥å­çº¢çº¢ç«ç«ï¼Œäººç”Ÿå¤„å¤„ç²¾å½©ã€‚",
        "æœˆåœ†æ·»å‰åº†ï¼Œç¯ç«é€å®‰åº·ï¼Œæ„¿ä½ æ–°çš„ä¸€å¹´é¡ºé£é¡ºæ°´ï¼Œæ‰€æ±‚çš†æ‰€å¾—ï¼Œæ‰€æƒ³çš†æˆçœŸï¼Œå‡ºé—¨é‡è´µäººï¼Œåœ¨å®¶å¬å–œæŠ¥ï¼Œå¹³å®‰å–œä¹å¸¸ç›¸éšï¼Œå‰ç¥¥å¥½è¿ä¼´å…¨å¹´ã€‚",
        "åƒä¸€ç¢—é¦™ç”œæ±¤åœ†ï¼Œç›¼ä¸€å¹´ä¸‡äº‹åœ†æ»¡ï¼Œæ„¿ä½ è´¢è¿äº¨é€šã€ç¦è¿ç»µé•¿ã€å¥½è¿è¿è¿ï¼Œå·¥ä½œä¸è¾›è‹¦ï¼Œç”Ÿæ´»ä¸ç–²æƒ«ï¼Œå¿ƒæƒ…å¸¸æ˜åªšï¼Œäººç”Ÿå¸¸æ¬¢å–œã€‚",
        "å…ƒå®µå¯æ–°ç¨‹ï¼Œä¸‡äº‹çš†å¯æœŸï¼Œæ„¿ä½ å‰è·¯å…‰æ˜ã€ä¸‡äº‹é¡ºé‚ã€å¿ƒæƒ³äº‹æˆï¼Œæ‰€æœ‰åŠªåŠ›ä¸è¢«è¾œè´Ÿï¼Œæ‰€æœ‰æ¢¦æƒ³ç»ˆä¼šå®ç°ï¼Œæ‰€æœ‰ç¾å¥½å¦‚çº¦è€Œè‡³ã€‚",
        "èŠ±ç¯æ˜ ç¦è¿ï¼Œåœ†æœˆç…§å®‰åº·ï¼Œæ„¿ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œç¦æ°”æ»¡æ»¡ã€è´¢æ°”æ»”æ»”ã€å–œæ°”æ´‹æ´‹ï¼Œäº‹äº‹æœ‰å›éŸ³ï¼Œä»¶ä»¶æœ‰ç€è½ï¼Œå¤„å¤„æœ‰æƒŠå–œã€‚",
        "è‰¯å®µç¾æ™¯åº†å…ƒå®µï¼Œæ¬¢æ­Œç¬‘è¯­è¿å¥½å…†ï¼Œæ„¿ä½ æ—¥å­æœ‰å…‰ã€å¿ƒä¸­æœ‰æ¢¦ã€èº«è¾¹æœ‰çˆ±ï¼Œä¸€è·¯æ˜¥æš–èŠ±å¼€ï¼Œä¸€ç”Ÿé¡ºé‚æ— å¿§ï¼Œä¸€å¹´æ›´æ¯”ä¸€å¹´å¥½ã€‚",
        "æœˆåœ†äººå®‰ï¼Œå²å²å‰ç¥¥ï¼Œæ„¿ä½ æ— ç—…æ— ç¾ã€å¹³å®‰è‡ªåœ¨ï¼Œæœ‰é’±æœ‰é—²ã€å–œä¹å¼€æ€€ï¼Œå¿™æ—¶æœ‰åŠ¨åŠ›ï¼Œé—²æ—¶æœ‰æ¸©é¦¨ï¼Œç”Ÿæ´»æœ‰æœŸå¾…ï¼Œäººç”Ÿæœ‰å…‰èŠ’ã€‚",
        "å…ƒå®µä½³èŠ‚å¥½è¿åˆ°ï¼Œå‰ç¥¥å¦‚æ„èº«è¾¹ç»•ï¼Œæ„¿ä½ æ¯ä¸€æ¬¡ä»˜å‡ºéƒ½æœ‰æ”¶è·ï¼Œæ¯ä¸€æ¬¡æœŸç›¼éƒ½æœ‰å›åº”ï¼Œæ¯ä¸€æ¬¡ç­‰å¾…éƒ½æœ‰ç»“æœï¼Œä¸‡äº‹é¡ºå¿ƒï¼Œçš†å¾—åœ†æ»¡ã€‚",
        "ç¯ç«åƒç›ï¼Œç¦æ»¡äººé—´ï¼Œæ„¿ä½ æ–°å²å¤šå–œä¹ã€é•¿å®‰å®ã€å¸¸å®‰åº·ï¼Œäº‹ä¸šæœ‰èµ·è‰²ï¼Œç”Ÿæ´»æœ‰å¥”å¤´ï¼Œå®¶åº­æœ‰æ¬¢ç¬‘ï¼Œæœªæ¥æœ‰å¸Œæœ›ã€‚",
        "æœˆåœ†æ˜ å¥½æ¢¦ï¼Œç¯ç«æš–äººå¿ƒï¼Œæ„¿ä½ å¾€åä½™ç”Ÿï¼Œé£é›¨æœ‰ä¼ï¼Œå½’é€”æœ‰ç¯ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œçœ¼ä¸­æœ‰å…‰ï¼Œç”Ÿæ´»æ¸©æŸ”ä»¥å¾…ï¼Œäººç”Ÿæ­¥æ­¥ç”ŸèŠ±ã€‚"
    ],
    'æ¸©æŸ”æ²»æ„ˆï¼ˆ10æ¡ï¼‰': [
        "æœˆå…‰æ¸©æŸ”ï¼Œç¯ç«å¯äº²ï¼Œäººé—´çƒŸç«ï¼Œæœ€æŠšäººå¿ƒã€‚æ„¿ä½ åœ¨å…ƒå®µè‰¯å¤œé‡Œï¼Œæ”¾ä¸‹ç–²æƒ«ä¸ç„¦è™‘ï¼Œæ‹¥æŠ±æ¸©æš–ä¸ç¾å¥½ï¼Œæ„¿ç”Ÿæ´»å–„å¾…ä½ ï¼Œå²æœˆä¸è¾œè´Ÿä½ ã€‚",
        "ä¸€ç›ç¯ï¼Œç…§äº®å½’é€”ï¼›ä¸€ç¢—æ±¤åœ†ï¼Œç”œæ»¡å¿ƒå¤´ã€‚æ„¿ä½ å†ç»ä¸–äº‹æ²§æ¡‘ï¼Œä¾æ—§çœ¼é‡Œæœ‰æ˜Ÿå…‰ï¼Œå¿ƒä¸­æœ‰å±±æµ·ï¼Œç¬‘é‡Œæœ‰å¦è¡ï¼Œä¸€ç”Ÿæ¸…æ¾ˆæ˜æœ—ã€‚",
        "æœˆè‰²å¦‚æ°´ï¼Œç¯å½±å¦‚æ¢¦ï¼Œæ„¿ä½ åœ¨å–§åš£äººé—´ï¼Œå®ˆä½ä¸€ä»½ä»å®¹ï¼Œç•™å¾—ä¸€ä»½å¿ƒå®‰ï¼Œä¸æ…Œä¸å¿™ï¼Œé™é™æˆé•¿ï¼Œæ…¢æ…¢å‘å…‰ï¼Œå¹³å®‰å–œä¹ï¼Œè‡ªåœ¨ä»å®¹ã€‚",
        "å…ƒå®µä¹‹å¤œï¼Œæ„¿æ‰€æœ‰çƒ¦æ¼éšå¤œè‰²æ¶ˆæ•£ï¼Œæ‰€æœ‰ç¾å¥½éšç¯ç«é™ä¸´ï¼Œæ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…ï¼Œè¢«å¹¸ç¦ç´§ç´§åŒ…å›´ï¼Œè¢«å¹³å®‰æ—¶æ—¶å®ˆæŠ¤ã€‚",
        "äººé—´æœ€ç¾æ˜¯å›¢åœ†ï¼Œä¸–é—´æœ€æš–æ˜¯å¿ƒå®‰ï¼Œæ„¿è¿™æ»¡åŸç¯ç«ï¼Œä¸ºä½ ç…§äº®å‰è·¯ï¼›æ„¿è¿™ä¸€è½®æ˜æœˆï¼Œä¸ºä½ å¸¦æ¥æ¸©æŸ”ï¼Œæ„¿ä½ å²å²å¸¸æ¬¢æ„‰ï¼Œå¹´å¹´çš†èƒœæ„ã€‚",
        "èŠ±ç¯æ‘‡æ›³ï¼Œæ˜¥é£è½»æ‹‚ï¼Œæ„¿ä½ å¿ƒä¸­æœ‰å…‰ï¼Œä¸ç®¡èµ°åˆ°å“ªé‡Œï¼Œéƒ½èƒ½è¢«æ¸©æš–ç…§äº®ï¼›æ„¿ä½ å¿ƒä¸­æœ‰çˆ±ï¼Œä¸ç®¡ç»å†ä»€ä¹ˆï¼Œéƒ½èƒ½è¢«å–„æ„ç¯ç»•ã€‚",
        "æœˆåœ†æ˜ åˆå¿ƒï¼Œæ¸©æš–èµ´äººç”Ÿï¼Œæ„¿ä½ ä¿æŒçƒ­çˆ±ï¼Œå¥”èµ´ä¸‹ä¸€åœºå±±æµ·ï¼›å¿ƒå­˜æœŸå¾…ï¼Œè¿æ¥æ¯ä¸€ä¸ªæ¸…æ™¨ï¼Œç”Ÿæ´»æ¸©æŸ”æœ‰è¶£ï¼Œäººç”Ÿå¹³å®‰é¡ºé‚ã€‚",
        "ç¯ç«æ˜ è¯—è¡Œï¼Œæœˆè‰²æ»¡å¿ƒæˆ¿ï¼Œæ„¿ä½ æ—¥å­æ¸…å‡€ï¼ŒæŠ¬å¤´çš†æ˜¯æ¸©æŸ”ï¼Œæ‰€è§çš†æ˜¯ç¾å¥½ï¼Œæ‰€å¿µçš†å¾—æ‰€æœŸï¼Œæ‰€æƒ³çš†èƒ½æˆçœŸï¼Œæ‰€çˆ±çš†å¯ç›¸å®ˆã€‚",
        "å…ƒå®µæœˆåœ†ï¼Œæ„¿æ‰€æœ‰å¥”èµ´éƒ½æœ‰æ„ä¹‰ï¼Œæ‰€æœ‰åšæŒéƒ½æœ‰å›æŠ¥ï¼Œæ‰€æœ‰é—æ†¾éƒ½èƒ½é‡Šæ€€ï¼Œæ‰€æœ‰ç¾å¥½éƒ½ä¸ç¼ºå¸­ï¼Œå¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ã€‚",
        "æ„¿è¿™ä¸€ç›ç›èŠ±ç¯ï¼Œç…§äº®ä½ ä¸€æ•´å¹´çš„å¥½è¿ï¼›æ„¿è¿™ä¸€ç¢—ç¢—æ±¤åœ†ï¼Œç”œæ»¡ä½ ä¸€æ•´å¹´çš„å¹¸ç¦ï¼Œæ„¿ä½ çœ¼é‡Œæœ‰ç¬‘ã€å¿ƒä¸­æœ‰æš–ã€èº«è¾¹æœ‰çˆ±ã€‚"
    ],
    'é›…è‡´å¤§æ°”ï¼ˆ10æ¡ï¼‰': [
        "ç¯æ ‘åƒå…‰ç…§ï¼Œæ˜æœˆé€äººæ¥ï¼Œå…ƒå®µè‰¯è¾°ï¼Œæ„¿å±±æ²³æ— æ™ï¼Œäººé—´çš†å®‰ï¼Œå®¶å’Œå›½ç››ï¼Œä¸‡äº‹é¡ºé‚ï¼Œæ„¿ä½ æ­¤ç”Ÿå°½å…´ï¼Œèµ¤è¯šå–„è‰¯ï¼Œå¹³å®‰å–œä¹ã€‚",
        "åç¯åˆä¸Šï¼Œå¤œè‰²é˜‘çŠï¼Œæœˆå…‰å¦‚æ°´ï¼Œç¯ç«å¦‚ç”»ã€‚æ„¿ä½ äºäººé—´çƒŸç«ä¸­åšå®ˆåˆå¿ƒï¼Œäºå²æœˆæµè½¬ä¸­ä¿æŒä»å®¹ï¼Œä¸è´Ÿæ—¶å…‰ï¼Œä¸è´Ÿè‡ªå·±ï¼Œä¸è´Ÿä½³æœŸã€‚",
        "æœˆæ»¡å…ƒå®µï¼Œç¯æ˜ äººé—´ï¼Œæ„¿ä½ å‰è·¯å…‰æ˜ï¼Œä¸‡äº‹åœ†æ»¡ï¼Œå¿ƒä¸­æœ‰å±±æµ·ï¼Œçœ¼åº•æœ‰æ˜Ÿè¾°ï¼Œè¡Œè‡³æ°´ç©·å¤„ï¼Œåçœ‹äº‘èµ·æ—¶ï¼Œä¸€ç”Ÿå®‰ç„¶ï¼Œå²å²æ— å¿§ã€‚",
        "ä¸€åŸç¯ç«ï¼Œä¸€å¤œå…ƒå®µï¼Œä¸€è½®æ˜æœˆï¼Œä¸€ä»½å¿ƒå®‰ã€‚æ„¿ä½ å†ç»åƒå¸†ï¼Œå½’æ¥ä»æ˜¯å°‘å¹´ï¼›å°éç™¾å‘³ï¼Œä¾æ—§çƒ­çˆ±ç”Ÿæ´»ï¼Œå²å²å¸¸å®‰åº·ï¼Œå¹´å¹´çš†æ¬¢å–œã€‚",
        "æœˆè‰²çšæ´ï¼ŒèŠ±ç¯ç’€ç’¨ï¼Œäººé—´è‰¯è¾°ï¼Œå–œä¹å¹³å®‰ã€‚æ„¿æ—¶å…‰æ¸…æµ…ï¼Œè®¸ä½ å®‰ç„¶ï¼›æ„¿å²æœˆæ‚ é•¿ï¼ŒæŠ¤ä½ å‘¨å…¨ï¼›æ„¿äººç”Ÿåœ†æ»¡ï¼Œä¼´ä½ å¹´å¹´ã€‚",
        "ç¯å½±æ‘‡çº¢ï¼Œå¤œæš–é£å¯’ï¼Œå…ƒå®µä½³èŠ‚ï¼Œæ„¿ä½ ä»¥æ¢¦ä¸ºé©¬ï¼Œä¸è´ŸéŸ¶åï¼›ä»¥å¿ƒä¸ºèˆŸï¼Œä¸è´Ÿæµå¹´ï¼Œä¸‡äº‹çš†å¦‚æ„ï¼Œä½™ç”Ÿçš†å®‰åº·ã€‚",
        "æœˆåœ†æ˜ è‰¯è¾°ï¼ŒèŠ±ç¯ç…§å¥½æ¢¦ï¼Œæ„¿ä¸–é—´æ‰€æœ‰ç¾å¥½ï¼Œéƒ½ä¸ä½ ä¸æœŸè€Œé‡ï¼›æ„¿äººç”Ÿæ‰€æœ‰åœ†æ»¡ï¼Œéƒ½ä¸ºä½ å¦‚çº¦è€Œè‡³ã€‚",
        "è‰¯å®µä¸€åˆ»å€¼åƒé‡‘ï¼Œæœˆåœ†èŠ±å¥½åº†æ–°æ˜¥ã€‚æ„¿ä½ æœ‰é—²èµç¯ï¼Œæœ‰å¿ƒå›¢åœ†ï¼Œæœ‰ç¦å®‰åº·ï¼Œæœ‰æ¢¦è¿½å¯»ï¼Œç”Ÿæ´»æœ‰è¯—æ„ï¼Œå¿ƒä¸­æœ‰å…‰èŠ’ã€‚",
        "ç¯ç«ç…§äººé—´ï¼Œå‰ç¥¥ä¼´æµå¹´ï¼Œæ„¿ä½ å¹³å®‰å‘æš–ï¼Œå–œä¹ä»å®¹ï¼Œäººç”Ÿå¦‚èŠ±ç¯èˆ¬ç»šçƒ‚ï¼Œæ—¥å­å¦‚æœˆå…‰èˆ¬æ¸©æŸ”ï¼Œå²å²æ— å¿§ï¼Œå¹´å¹´åœ†æ»¡ã€‚",
        "å…ƒå®µä¹‹å¤œï¼Œæœˆè‰²å…¥æ€€ï¼Œç¯ç«å…¥å¿ƒã€‚æ„¿ä½ çœ¼ä¸­æœ‰å…‰ã€ç¬‘é‡Œæœ‰ç³–ã€å¿ƒä¸­æœ‰çˆ±ï¼Œç”Ÿæ´»ä¸æ‹¥æŒ¤ï¼Œç¬‘å®¹ä¸ç¼ºå¸­ï¼Œä¸€ç”Ÿé¡ºé‚ï¼Œä¸€ä¸–å®‰å®ã€‚"
    ],
    'èŒåœºç¥ç¦ï¼ˆ10æ¡ï¼‰': [
        "å…ƒå®µä½³èŠ‚ï¼Œæœˆåœ†äººåœ†ï¼Œç¥æ‚¨æ–°çš„ä¸€å¹´äº‹ä¸šè’¸è’¸æ—¥ä¸Šï¼Œå‰ç¨‹ä¼¼é”¦å®å›¾å±•ï¼Œä¸‡äº‹é¡ºå¿ƒæ­¥æ­¥é«˜ï¼Œå®¶åº­å’Œç¦å¸¸å¹¸ç¦ï¼Œå¹³å®‰å–œä¹å¸¸ç›¸ä¼´ã€‚",
        "ç¯ç«æ˜ æ–°ç¨‹ï¼Œå›¢åœ†èµ´ä½³æœŸï¼Œæ„Ÿè°¢ä¸€è·¯æ”¯æŒä¸ä¿¡ä»»ï¼Œæ„¿æ–°çš„ä¸€å¹´åˆä½œæ›´åŠ é¡ºç•…ï¼Œå‰æ™¯æ›´åŠ å¹¿é˜”ï¼Œäº‹ä¸šæ›´ä¸Šä¸€å±‚æ¥¼ï¼Œè´¢æºå¹¿è¿›è¾¾å››æ–¹ã€‚",
        "æœˆåœ†æ·»å‰åº†ï¼Œç¯ç«å¯æ–°ç« ï¼Œç¥æ‚¨å·¥ä½œé¡ºåˆ©ã€äº‹äº‹é¡ºå¿ƒã€æ­¥æ­¥é«˜å‡ã€å‰é€”å…‰æ˜ï¼Œèº«ä½“å®‰åº·ã€å®¶åº­ç¾æ»¡ã€ç¦æ°”å¸¸æ»¡ã€å¥½è¿å¸¸ä¸´ã€‚",
        "è‰¯å®µå…±åº¦ï¼Œä¸‡è±¡æ›´æ–°ï¼Œæ„¿æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œç›®æ ‡æ¸…æ™°ã€æ­¥å±¥åšå®šã€äº‹ä¸šæœ‰æˆã€ååˆ©åŒæ”¶ï¼Œæ‰€æœ‰åŠªåŠ›çš†æœ‰å›æŠ¥ï¼Œæ‰€æœ‰ä»˜å‡ºçš†æœ‰æˆæœã€‚",
        "å…ƒå®µé€ç¦ï¼Œç¯ç«ä¼ å–œï¼Œç¥æ‚¨æ–°å²å¤§å‰ã€ä¸‡äº‹äº¨é€šã€ç”Ÿæ„å…´éš†ã€è´¢æºæ»šæ»šï¼Œå›¢é˜ŸåŒå¿ƒï¼Œå…¶åˆ©æ–­é‡‘ï¼Œæºæ‰‹å…±è¿›ï¼Œå†åˆ›ä½³ç»©ã€‚",
        "æœˆåœ†äººå®‰ï¼Œäº‹ä¸šé•¿å®‰ï¼Œæ„¿æ‚¨æ–°çš„ä¸€å¹´é¡ºé£é¡ºæ°´ï¼Œæœºé‡å¸¸åœ¨ï¼Œè´µäººç›¸åŠ©ï¼Œå¹³å°æ›´å¹¿ï¼Œé“è·¯æ›´å®½ï¼Œæœªæ¥å¯æœŸï¼Œå‰ç¨‹æ— é™ã€‚",
        "ä½³èŠ‚è‰¯å®µï¼Œç¯ç«ç’€ç’¨ï¼Œç¥æ‚¨å·¥ä½œèˆ’å¿ƒã€ç”Ÿæ´»æš–å¿ƒã€å®¶äººå®‰å¿ƒã€ä¸‡äº‹æ”¾å¿ƒï¼Œæ„¿æ‰€æœ‰ç¾å¥½å¦‚æœŸè€Œè‡³ï¼Œæ‰€æœ‰å¹¸è¿ä¸æœŸè€Œé‡ã€‚",
        "å…ƒå®µå¯æ–°å²ï¼Œæºæ‰‹èµ´æ–°ç¨‹ï¼Œæ„Ÿè°¢ä¸€è·¯åŒè¡Œï¼Œæ„¿æˆ‘ä»¬åœ¨æ–°çš„ä¸€å¹´é‡ŒåŒå¿ƒåŒå‘ã€åŒåŠ›åŒè¡Œï¼Œæ”»åšå…‹éš¾ï¼Œå…±èµ¢æœªæ¥ï¼Œä¸‡äº‹åœ†æ»¡ã€‚",
        "æœˆåœ†æ˜ åˆå¿ƒï¼Œç¯ç«ç…§å‰ç¨‹ï¼Œç¥æ‚¨æ–°çš„ä¸€å¹´äº‹ä¸šå…´æ—ºã€å®¶åº­å¹¸ç¦ã€èº«ä½“å¥åº·ã€ä¸‡äº‹é¡ºé‚ï¼Œå¥½è¿è¿è¿ï¼Œç¦æ°”ç»µç»µã€‚",
        "å…ƒå®µä½³èŠ‚ï¼Œå–œä¹å®‰åº·ï¼Œæ„¿æ‚¨æ–°å²å¤šå–œå¤šç¦å¤šå¥½è¿ï¼Œå°‘çƒ¦å°‘å¿§å°‘ç–²æƒ«ï¼Œäº‹ä¸šç¨³è¿›ï¼Œç”Ÿæ´»å®‰ç¨³ï¼Œå¿ƒå¢ƒå®‰ç„¶ï¼Œä¸‡äº‹åœ†æ»¡ã€‚"
    ]
}

FESTIVALS = ['æ˜¥èŠ‚ç¥ç¦', 'å…ƒå®µèŠ‚ç¥ç¦']


class StartScreen(Screen):
    """å¯æ»‘åŠ¨å¼€å±å¹¿å‘Šé¡µï¼Œå¸¦è·³è¿‡æŒ‰é’®å’Œåº•éƒ¨æŒ‡ç¤ºç‚¹"""
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        layout = FloatLayout()

        # è½®æ’­å›¾ç‰‡åˆ—è¡¨
        splash_images = ['images/splash1.png', 'images/splash2.png', 'images/splash3.png']
        self.carousel = Carousel(direction='right', loop=True)
        for img_path in splash_images:
            img = Image(source=img_path, allow_stretch=True, keep_ratio=False)
            self.carousel.add_widget(img)
        self.carousel.bind(current_slide=self.on_slide_changed)
        layout.add_widget(self.carousel)

        # åº•éƒ¨æŒ‡ç¤ºå™¨
        indicator_layout = BoxLayout(
            size_hint=(None, None),
            size=(dp(len(splash_images)*30), dp(30)),
            pos_hint={'center_x': 0.5, 'y': 0.05},
            spacing=dp(5)
        )
        self.indicators = []
        for i in range(len(splash_images)):
            lbl = Label(
                text='â—‹',
                font_size=sp(20),
                color=(1,1,1,1),
                size_hint=(None, None),
                size=(dp(20), dp(20)),
                font_name='Chinese'
            )
            self.indicators.append(lbl)
            indicator_layout.add_widget(lbl)
        self.update_indicator(0)
        layout.add_widget(indicator_layout)

        # è·³è¿‡æŒ‰é’®
        skip_btn = Button(
            text='è·³è¿‡',
            size_hint=(None, None),
            size=(dp(80), dp(40)),
            pos_hint={'right': 1, 'top': 1},
            background_color=get_color_from_hex('#80000000'),
            color=(1,1,1,1),
            bold=True,
            font_name='Chinese'
        )
        skip_btn.bind(on_press=self.skip_to_main)
        layout.add_widget(skip_btn)

        # å€’è®¡æ—¶æ ‡ç­¾
        self.countdown_label = Label(
            text='3 ç§’',
            size_hint=(None, None),
            size=(dp(80), dp(30)),
            pos_hint={'right': 1, 'top': 0.9},
            color=(1,1,1,1),
            bold=True,
            font_name='Chinese'
        )
        layout.add_widget(self.countdown_label)

        self.add_widget(layout)

        self.countdown = 3
        self.update_countdown()
        Clock.schedule_interval(self.update_countdown, 1)
        Clock.schedule_once(self.go_main, 3)

    def update_countdown(self, dt=None):
        if self.countdown > 0:
            self.countdown_label.text = f'{self.countdown} ç§’'
            self.countdown -= 1
        else:
            self.countdown_label.text = 'è¿›å…¥'
            return False

    def on_slide_changed(self, carousel, index):
        self.update_indicator(index)

    def update_indicator(self, index):
        for i, lbl in enumerate(self.indicators):
            lbl.text = 'â—' if i == index else 'â—‹'

    def skip_to_main(self, instance):
        Clock.unschedule(self.update_countdown)
        Clock.unschedule(self.go_main)
        self.manager.current = 'main'

    def go_main(self, *args):
        self.manager.current = 'main'


class MainScreen(Screen):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.current_festival = FESTIVALS[0]
        self.current_category = list(BLESSINGS_SPRING.keys())[0]
        self.current_page = 0
        self.total_pages = 2
        self.update_category_list()

        # é•¿æŒ‰æ£€æµ‹ç›¸å…³
        self.long_press_trigger = None
        self.selected_item = None  # å½“å‰é€‰ä¸­çš„æ¡ç›®

        main_layout = BoxLayout(orientation='vertical', spacing=0, padding=0)

        # é¡¶éƒ¨å›¾ç‰‡
        top_container = FloatLayout(size_hint_y=None, height=dp(150))
        top_img = Image(source='images/top.jpg', allow_stretch=True, keep_ratio=False,
                        size_hint=(1,1), pos_hint={'x':0,'y':0})
        top_container.add_widget(top_img)
        main_layout.add_widget(top_container)

        # èŠ‚æ—¥åˆ‡æ¢æŒ‰é’®
        festival_layout = BoxLayout(size_hint=(1, None), height=dp(50), spacing=dp(2))
        self.spring_btn = Button(
            text='æ˜¥èŠ‚ç¥ç¦',
            background_color=get_color_from_hex('#DAA520'),
            color=(1,1,1,1),
            bold=True,
            font_name='Chinese'
        )
        self.spring_btn.bind(on_press=lambda x: self.switch_festival('æ˜¥èŠ‚ç¥ç¦'))
        self.lantern_btn = Button(
            text='å…ƒå®µèŠ‚ç¥ç¦',
            background_color=get_color_from_hex('#8B4513'),
            color=(1,1,1,1),
            bold=True,
            font_name='Chinese'
        )
        self.lantern_btn.bind(on_press=lambda x: self.switch_festival('å…ƒå®µèŠ‚ç¥ç¦'))
        festival_layout.add_widget(self.spring_btn)
        festival_layout.add_widget(self.lantern_btn)
        main_layout.add_widget(festival_layout)

        # åˆ†ç±» Spinnerï¼ˆè‡ªå®šä¹‰ä¸‹æ‹‰èœå•æ ·å¼ï¼‰
        self.category_spinner = Spinner(
            text=self.current_category,
            values=self.category_list,
            size_hint=(1, None),
            height=dp(45),
            background_color=get_color_from_hex('#FFF5E6'),
            color=(0,0,0,1),
            font_name='Chinese'
        )
        self.category_spinner.bind(text=self.on_category_change)
        self.category_spinner.bind(on_dropdown_open=self.customize_dropdown)
        main_layout.add_widget(self.category_spinner)

        # ç¿»é¡µåŒºåŸŸ
        page_layout = BoxLayout(size_hint=(1, None), height=dp(40), spacing=dp(2))
        self.prev_btn = Button(
            text='ä¸Šä¸€é¡µ',
            on_press=self.prev_page,
            disabled=True,
            background_color=get_color_from_hex('#DAA520'),
            color=(1,1,1,1),
            font_name='Chinese'
        )
        self.page_label = Label(
            text='ç¬¬1é¡µ/å…±2é¡µ',
            color=(0.2,0.2,0.2,1),
            font_name='Chinese'
        )
        self.next_btn = Button(
            text='ä¸‹ä¸€é¡µ',
            on_press=self.next_page,
            background_color=get_color_from_hex('#DAA520'),
            color=(1,1,1,1),
            font_name='Chinese'
        )
        page_layout.add_widget(self.prev_btn)
        page_layout.add_widget(self.page_label)
        page_layout.add_widget(self.next_btn)
        main_layout.add_widget(page_layout)

        # ç¥ç¦è¯­åˆ—è¡¨ï¼ˆå¯æ»šåŠ¨ï¼‰
        self.scroll_view = ScrollView()
        self.list_layout = BoxLayout(orientation='vertical', size_hint_y=None, spacing=dp(8))
        self.list_layout.bind(minimum_height=self.list_layout.setter('height'))
        self.scroll_view.add_widget(self.list_layout)
        main_layout.add_widget(self.scroll_view)

        # åº•éƒ¨ä¸¤ä¸ªåŠŸèƒ½æŒ‰é’®
        bottom_buttons = BoxLayout(size_hint=(1, None), height=dp(50), spacing=dp(8))
        send_btn = Button(
            text='å‘é€ç¥ç¦',
            background_color=get_color_from_hex('#DAA520'),
            color=(1,1,1,1),
            font_name='Chinese'
        )
        send_btn.bind(on_press=self.send_blessings)
        share_btn = Button(
            text='å‘ç»™å¾®ä¿¡å¥½å‹',
            background_color=get_color_from_hex('#4CAF50'),
            color=(1,1,1,1),
            font_name='Chinese'
        )
        share_btn.bind(on_press=self.share_blessings)
        bottom_buttons.add_widget(send_btn)
        bottom_buttons.add_widget(share_btn)
        main_layout.add_widget(bottom_buttons)

        # åº•éƒ¨çŠ¶æ€æ ï¼ˆç‰ˆæƒä¿¡æ¯ï¼Œå¯ç‚¹å‡»ï¼‰
        status_bar = BoxLayout(size_hint=(1, None), height=dp(30), padding=0)
        with status_bar.canvas.before:
            Color(0.2, 0.2, 0.2, 1)
            self.status_rect = Rectangle(size=status_bar.size, pos=status_bar.pos)
        status_bar.bind(size=self._update_status_rect, pos=self._update_status_rect)
        copyright_btn = Button(
            text='Copyright Â© 2026 å“å½±å·¥ä½œå®¤Â·ç‘¾ç…œ. All Rights Reserved',
            color=get_color_from_hex('#DAA520'),
            font_size=sp(8),
            background_color=(0,0,0,0),
            bold=True,
            font_name='Chinese'
        )
        copyright_btn.bind(on_press=self.show_about_popup)
        status_bar.add_widget(copyright_btn)
        main_layout.add_widget(status_bar)

        self.add_widget(main_layout)
        self.show_current_page()

    def customize_dropdown(self, spinner, dropdown):
        """è‡ªå®šä¹‰ä¸‹æ‹‰èœå•æ ·å¼ï¼Œç¡®ä¿æ¯ä¸ªé€‰é¡¹ä½¿ç”¨ä¸­æ–‡å­—ä½“"""
        dropdown.background_color = get_color_from_hex('#FFF5E6')
        for child in dropdown.children:
            if isinstance(child, Button):
                child.font_name = 'Chinese'
                child.color = (0,0,0,1)
                child.background_normal = ''
                child.background_color = get_color_from_hex('#FFF5E6')
                child.halign = 'left'
                child.padding = (dp(10), dp(5))
        dropdown.width = spinner.width

    def _update_status_rect(self, instance, value):
        self.status_rect.pos = instance.pos
        self.status_rect.size = instance.size

    def switch_festival(self, festival):
        if festival == self.current_festival:
            return
        self.current_festival = festival
        if festival == 'æ˜¥èŠ‚ç¥ç¦':
            self.spring_btn.background_color = get_color_from_hex('#DAA520')
            self.lantern_btn.background_color = get_color_from_hex('#8B4513')
        else:
            self.spring_btn.background_color = get_color_from_hex('#8B4513')
            self.lantern_btn.background_color = get_color_from_hex('#DAA520')
        self.update_category_list()
        self.category_spinner.values = self.category_list
        self.current_category = self.category_list[0]
        self.category_spinner.text = self.current_category
        self.current_page = 0
        self.update_page_buttons()
        self.show_current_page()

    def update_category_list(self):
        if self.current_festival == 'æ˜¥èŠ‚ç¥ç¦':
            self.category_list = list(BLESSINGS_SPRING.keys())
        else:
            self.category_list = list(BLESSINGS_LANTERN.keys())

    def get_current_blessings_dict(self):
        if self.current_festival == 'æ˜¥èŠ‚ç¥ç¦':
            return BLESSINGS_SPRING
        else:
            return BLESSINGS_LANTERN

    def on_category_change(self, spinner, text):
        self.current_category = text
        self.current_page = 0
        self.update_page_buttons()
        self.show_current_page()

    def show_current_page(self):
        self.list_layout.clear_widgets()
        blessings_dict = self.get_current_blessings_dict()
        blessings = blessings_dict[self.current_category]
        start = self.current_page * 5
        end = min(start + 5, len(blessings))
        page_items = blessings[start:end]

        for text in page_items:
            btn = Button(
                text=text,
                size_hint_y=None,
                height=dp(80),
                background_normal='',
                background_color=(1, 1, 1, 0.9),  # é»˜è®¤ç™½è‰²åŠé€æ˜
                color=(0.1, 0.1, 0.1, 1),
                halign='left',
                valign='top',
                padding=(dp(10), dp(5)),
                font_name='Chinese'
            )
            btn.bind(
                width=lambda *x, b=btn: b.setter('text_size')(b, (b.width - dp(20), None)),
                texture_size=lambda *x, b=btn: setattr(b, 'height', b.texture_size[1] + dp(10))
            )
            btn.bind(on_press=self.on_press)
            btn.bind(on_release=self.on_release)
            btn.blessing_text = text
            btn.default_bg_color = (1, 1, 1, 0.9)  # ä¿å­˜é»˜è®¤èƒŒæ™¯è‰²
            self.list_layout.add_widget(btn)

    def on_press(self, instance):
        self.long_press_trigger = Clock.schedule_once(
            lambda dt: self.copy_on_long_press(instance), 0.5
        )

    def on_release(self, instance):
        if self.long_press_trigger:
            self.long_press_trigger.cancel()
            self.long_press_trigger = None

    def copy_on_long_press(self, instance):
        self.long_press_trigger = None
        text = instance.blessing_text
        Clipboard.copy(text)
        show_toast('ç¥ç¦è¯­å·²å¤åˆ¶')

        # æ¢å¤ä¸Šä¸€ä¸ªé€‰ä¸­çš„æ¡ç›®èƒŒæ™¯è‰²
        if self.selected_item and self.selected_item != instance:
            self.selected_item.background_color = self.selected_item.default_bg_color

        # è®¾ç½®å½“å‰æ¡ç›®ä¸ºé€‰ä¸­çŠ¶æ€ï¼ˆè“è‰²èƒŒæ™¯ï¼‰
        instance.background_color = (0.2, 0.6, 1, 1)  # è“è‰²
        self.selected_item = instance

    def prev_page(self, instance):
        if self.current_page > 0:
            self.current_page -= 1
            self.update_page_buttons()
            self.show_current_page()

    def next_page(self, instance):
        if self.current_page < self.total_pages - 1:
            self.current_page += 1
            self.update_page_buttons()
            self.show_current_page()

    def update_page_buttons(self):
        self.prev_btn.disabled = (self.current_page == 0)
        self.next_btn.disabled = (self.current_page == self.total_pages - 1)
        self.page_label.text = f'ç¬¬{self.current_page+1}é¡µ/å…±{self.total_pages}é¡µ'

    def send_blessings(self, instance):
        blessings_dict = self.get_current_blessings_dict()
        blessings = blessings_dict[self.current_category]
        start = self.current_page * 5
        end = min(start + 5, len(blessings))
        page_items = blessings[start:end]
        full_text = '\n---\n'.join(page_items)
        Clipboard.copy(full_text)
        show_toast('å·²å¤åˆ¶å½“å‰é¡µæ‰€æœ‰ç¥ç¦')

    def share_blessings(self, instance):
        blessings_dict = self.get_current_blessings_dict()
        blessings = blessings_dict[self.current_category]
        start = self.current_page * 5
        end = min(start + 5, len(blessings))
        page_items = blessings[start:end]
        full_text = '\n---\n'.join(page_items)
        if share_text(full_text):
            show_toast('åˆ†äº«å·²å¯åŠ¨')
        else:
            Clipboard.copy(full_text)
            show_toast('åˆ†äº«å¤±è´¥ï¼Œå·²å¤åˆ¶åˆ°å‰ªè´´æ¿')

    def show_about_popup(self, instance):
        content = BoxLayout(orientation='vertical', spacing=dp(10), padding=dp(20))
        content.add_widget(Label(
            text='é©¬å¹´ç¥ç¦APP\nç‰ˆæœ¬ï¼šv1.0.21\nå¼€å‘å›¢é˜Ÿï¼šå“å½±å·¥ä½œå®¤ Â· ç‘¾ ç…œ',
            halign='center',
            valign='middle',
            size_hint_y=None,
            height=dp(120),
            font_name='Chinese'
        ))
        close_btn = Button(
            text='å…³é—­',
            size_hint=(None, None),
            size=(dp(100), dp(40)),
            font_name='Chinese'
        )
        close_btn.bind(on_press=lambda x: popup.dismiss())
        content.add_widget(close_btn)

        popup = Popup(
            title='å…³äº',
            content=content,
            size_hint=(0.8, 0.4),
            auto_dismiss=False,
            title_font='Chinese'
        )
        popup.open()


class BlessApp(App):
    def build(self):
        Window.size = (1440, 3200)
        sm = ScreenManager()
        sm.add_widget(StartScreen(name='start'))
        sm.add_widget(MainScreen(name='main'))
        return sm


if __name__ == '__main__':
    BlessApp().run()
