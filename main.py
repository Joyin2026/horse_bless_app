"""
main.py - é©¬å¹´ç¥ç¦åº”ç”¨
ä¾èµ–ï¼škivy, plyer
æ‰“åŒ…ï¼šbuildozer
"""

import kivy
from kivy.app import App
from kivy.uix.screenmanager import ScreenManager, Screen
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.scrollview import ScrollView
from kivy.uix.label import Label
from kivy.uix.button import Button
from kivy.uix.spinner import Spinner
from kivy.uix.image import Image
from kivy.core.clipboard import Clipboard
from kivy.clock import Clock
from kivy.utils import get_color_from_hex
from kivy.core.window import Window
from kivy.metrics import dp, sp

# å°è¯•å¯¼å…¥plyer toastï¼ˆå®‰å“åŸç”Ÿåå¸ï¼‰ï¼Œè‹¥å¤±è´¥åˆ™ä½¿ç”¨ç®€æ˜“Popup
try:
    from plyer import toast
except ImportError:
    toast = None

# ç¥ç¦è¯­æ•°æ®ï¼ˆæŒ‰åˆ†ç±»ç´¢å¼•ï¼‰
BLESSINGS = {
    'å¹½é»˜ææ€ª': [
        "é©¬å¹´åˆ°ï¼Œå¥½è¿â€œé©¬â€ä¸åœè¹„å‘ä½ å¥”æ¥ï¼2026å¹´ï¼Œç¥ä½ æé’±é€Ÿåº¦å ªæ¯”åƒé‡Œé©¬ï¼Œæ‘¸é±¼æŠ€æœ¯ç»ƒå¾—ç‚‰ç«çº¯é’ã€‚ä¸åšèŒåœºç‰›é©¬ï¼Œåªåšå¿«ä¹é‡é©¬ï¼Œé’±åŒ…é¼“é¼“ï¼Œçƒ¦æ¼å…¨æ— ï¼Œå’±ä»¬ç»§ç»­ç›¸çˆ±ç›¸æ€ï¼ğŸ´",
        "ä½ çš„ä¸™åˆé©¬å¹´ä¸“å±å¥½è¿å·²é€è¾¾ï¼Œè¯·ç­¾æ”¶ï¼æ–°çš„ä¸€å¹´ï¼Œä¸»æ‰“ä¸€ä¸ªâ€œé©¬ä¸Šâ€ç³»åˆ—ï¼šé©¬ä¸Šæš´å¯Œï¼Œé©¬ä¸Šå˜ç˜¦ï¼Œé©¬ä¸Šè„±å•ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œé©¬ä¸Šå®ç°è´¢åŠ¡è‡ªç”±ï¼Œå¸¦æˆ‘ä¸€èµ·é£ï¼",
        "å…„å¼Ÿï¼Œé©¬å¹´å¿«ä¹ï¼ç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œå‘é™…çº¿åƒé©¬å°¾ä¸€æ ·æµ“å¯†ï¼Œé“¶è¡Œå¡ä½™é¢åƒé©¬è¹„å£°ä¸€æ ·æ•°ä¸æ¸…ã€‚å·¥ä½œä¸Šä¸€é©¬å½“å…ˆï¼Œé…’æ¡Œä¸Šåƒæ¯ä¸é†‰ï¼Œä»Šå¹´å’±ä»¬å¿…é¡»çº¢çº¢ç«ç«ï¼",
        "é›†ç¾ï¼Œé©¬å¹´å¤§å‰ï¼å¬è¯´é©¬å¹´æ˜¯å’±ä»¬çš„ä¸»åœºï¼Œæ„¿ä½ èƒ¡åƒæµ·å–ä¸é•¿è‚‰ï¼Œç†¬å¤œè¿½å‰§ä¸çˆ†ç—˜ã€‚æ¡ƒèŠ±æœµæœµå¼€ï¼Œçƒ‚æ¡ƒèŠ±æ»šè¿œç‚¹ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½â€œé©¬ä¸Šâ€å‘ç”Ÿåœ¨ä½ èº«ä¸Šï¼",
        "å˜šé©¾ï¼å¥½è¿é©¬æ­£å‘ä½ ç‹‚å¥”ï¼Œè¯·æ³¨æ„é¿è®©çƒ¦æ¼ï¼Œå¼ å¼€åŒè‡‚è¿æ¥æš´å¯Œã€‚2026å¹´ï¼Œå¸Œæœ›ä½ ä¾ç„¶ä¿æŒé‚£ä»½å¤©çœŸï¼Œåƒå°é©¬é©¹ä¸€æ ·åœ¨å¿«ä¹è‰åŸä¸Šæ’’æ¬¢ï¼Œæ°¸è¿œåšä¸ªå¿«ä¹çš„å°å­©ã€‚",
        "é©¬å¹´è®¸æ„¿ï¼šæ„¿ä½ èµšé’±ä¸è´¹åŠ›ï¼Œç”Ÿæ´»ä¸è´¹å¿ƒï¼Œçˆ±æƒ…ä¸è´¹ç¥ã€‚åšä¸€åŒ¹è„±ç¼°çš„é‡é©¬ï¼Œåœ¨è‡ªç”±çš„å¤©åœ°é‡Œé©°éª‹ï¼Œå»å“ªé‡Œéƒ½é¡ºè·¯ï¼Œåšä»€ä¹ˆéƒ½æˆåŠŸï¼",
        "è¿‡å¹´å¥½ï¼é©¬å¹´åˆ°äº†ï¼Œç¥ä½ æ™ºå•†åœ¨çº¿ï¼Œé¢œå€¼çˆ†è¡¨ï¼Œé’±åŒ…é¼“åŒ…ã€‚æ‹’ç»å†…å·ï¼Œæ‹’ç»å†…è€—ï¼Œé©¬åŠ›å…¨å¼€äº«å—ç”Ÿæ´»ï¼ŒæŠŠå»å¹´çš„é—æ†¾éƒ½å˜æˆä»Šå¹´çš„æƒŠå–œï¼",
        "ç‰¹æ‰¹ä½ é©¬å¹´â€œå¸¦è–ªå¿«ä¹â€ä¸€å¹´ï¼æ„¿ä½ åœ¨2026å¹´ï¼Œè€æ¿ä¸æ‰¾èŒ¬ï¼Œå®¢æˆ·ä¸ç£¨å½ï¼ŒåŒäº‹ä¸ç”©é”…ã€‚æ¯å¤©éƒ½æ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ï¼Œæ‰€æœ‰çš„å¥½äº‹éƒ½æ’é˜Ÿæ¥æ‰¾ä½ ï¼",
        "é©¬å¹´åˆ°ï¼Œé€ä½ ä¸€åŒ¹â€œç¥é©¬â€ï¼å®ƒèƒ½é©®ç€ä½ é¿å¼€æ‰€æœ‰å¼¯è·¯ï¼Œç›´è¾¾å¹¸ç¦ç»ˆç‚¹ã€‚ç¥ä½ ä»Šå¹´ä¹°å½©ç¥¨ä¸­å¤´å¥–ï¼Œæ‰“æ¸¸æˆå¿…åƒé¸¡ï¼Œåƒç«é”…æ°¸è¿œæœ‰æ¯›è‚šï¼Œå¿«ä¹åŠ å€ï¼",
        "è™½ç„¶ä½ ä¸å±é©¬ï¼Œä½†æˆ‘ç¥ä½ é©¬å¹´â€œé©¬â€åŠ›åè¶³ï¼è¿½å¾—ä¸Šé«˜é“ï¼Œå“„å¾—å¥½çˆ±äººï¼Œæ‰“å¾—è¿‡ç”Ÿæ´»çš„å°æ€ªå…½ã€‚2026ï¼Œå’±ä»¬ä¸€èµ·ç­–é©¬å¥”è…¾ï¼Œæ´»å¾—æ½‡æ½‡æ´’æ´’ï¼"
    ],
    'æ·±æƒ…èµ°å¿ƒ': [
        "å²æœˆåŒ†åŒ†ï¼Œåˆæ˜¯ä¸€å¹´ã€‚åœ¨è¿™ä¸ªå–œåº†çš„é©¬å¹´æ˜¥èŠ‚ï¼Œç‰¹æ„ç»™ä½ å‘å»è¿™æ¡ç¥ç¦ã€‚æ„Ÿè°¢ä½ è¿™ä¹ˆå¤šå¹´çš„é™ªä¼´ä¸åŒ…å®¹ï¼Œæ— è®ºè·ç¦»è¿œè¿‘ï¼Œä½ æ°¸è¿œæ˜¯æˆ‘å¿ƒé‡Œæœ€é‡è¦çš„äººã€‚æ„¿ä½ é©¬å¹´å¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ã€‚",
        "é©¬è¹„å£°å£°ï¼Œè¸ç¢æ—§å²çš„å°˜åŸƒï¼Œè¿æ¥æ–°å²çš„æ›™å…‰ã€‚å¾ˆåº†å¹¸ï¼Œæ–°çš„ä¸€å¹´ä¾ç„¶æœ‰ä½ åœ¨èº«è¾¹ã€‚2026ä¸™åˆå¹´ï¼Œæ„¿æˆ‘ä»¬çš„æƒ…è°Šå¦‚éªé©¬èˆ¬åšéŸ§ï¼Œå¦‚è€é…’èˆ¬é†‡åšã€‚æ–°å¹´å¿«ä¹ï¼Œæˆ‘çš„è€æœ‹å‹ã€‚",
        "è·ç¦»é˜»æŒ¡ä¸äº†ç¥ç¦çš„è„šæ­¥ï¼Œé©¬å¹´çš„é’Ÿå£°å·²ç»æ•²å“ã€‚è¿œæ–¹çš„ä½ ï¼Œè¿˜å¥½å—ï¼Ÿå¸Œæœ›è¿™æ¡ä¿¡æ¯èƒ½ç»™ä½ å¸¦å»ä¸€ä¸æ¸©æš–ã€‚æ„¿ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæœ‰äººçˆ±ï¼Œæœ‰äº‹åšï¼Œæœ‰æ‰€æœŸå¾…ï¼Œæ‰€æœ‰çš„å¥”èµ´éƒ½æœ‰æ„ä¹‰ã€‚",
        "äº²çˆ±çš„ï¼Œé©¬å¹´å¿«ä¹ï¼è¿™æ˜¯æˆ‘ä»¬ä¸€èµ·åº¦è¿‡çš„åˆä¸€ä¸ªæ˜¥èŠ‚ã€‚æ„¿ä½ åœ¨2026å¹´ï¼Œæ—¢æœ‰ç­–é©¬å¥”è…¾çš„è±ªæƒ…ï¼Œä¹Ÿæœ‰ç»†å—…è”·è–‡çš„æ¸©æŸ”ã€‚ä¸ç®¡æœªæ¥å¦‚ä½•ï¼Œæˆ‘éƒ½ä¼šé™ªä½ ä¸€èµ·ï¼Œçœ‹éä¸–é—´é£æ™¯ã€‚",
        "æ—¶å…‰ä¸è€ï¼Œæˆ‘ä»¬ä¸æ•£ã€‚é©¬å¹´åˆ°äº†ï¼Œç»™ä½ æ‹œä¸ªå¹´ã€‚æ„¿ä½ åœ¨è¿™ä¸ªå……æ»¡æ´»åŠ›çš„å¹´ä»½é‡Œï¼Œä¸å¿˜åˆå¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚ç´¯äº†å°±åœä¸‹æ¥æ­‡æ­‡ï¼Œæˆ‘æ°¸è¿œæ˜¯ä½ å¯ä»¥åœé çš„æ¸¯æ¹¾ã€‚",
        "è¿˜è®°å¾—å°æ—¶å€™ä¸€èµ·æ”¾é­ç‚®çš„æ—¥å­å—ï¼Ÿè½¬çœ¼åˆæ˜¯é©¬å¹´ã€‚è™½ç„¶ç°åœ¨å„å¿™å„çš„ï¼Œä½†å¿ƒé‡Œçš„ç‰µæŒ‚ä»æœªå‡å°‘ã€‚ç¥ä½ å’Œå®¶äººæ–°æ˜¥å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦ï¼Œå¸Œæœ›å’±ä»¬ä»Šå¹´èƒ½å¤šèšèšï¼",
        "æ–°æ˜¥ä½³èŠ‚ï¼Œæœ€æƒ³å¿µçš„è¿˜æ˜¯ä½ ã€‚æ„¿ä½ é©¬å¹´è¡Œå¤§è¿ï¼ŒæŠŠè¿‡å»ä¸€å¹´çš„ç–²æƒ«éƒ½å¸ä¸‹ï¼ŒæŠŠæ‰€æœ‰çš„å¸Œæœ›éƒ½è£…æ»¡ã€‚æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±ï¼Œè„šä¸‹æœ‰è·¯ï¼Œä¸€ç”Ÿå‘é˜³ã€‚",
        "æ¯åˆ°è¿‡å¹´ï¼Œæœ€å¼€å¿ƒçš„å°±æ˜¯ç»™ä½ å‘ç¥ç¦ã€‚2026æ˜¯é©¬å¹´ï¼Œè±¡å¾ç€å¥”è…¾ä¸å¸Œæœ›ã€‚æ„¿ä½ åƒåƒé‡Œé©¬ä¸€æ ·ï¼Œå¥”å‘å±äºè‡ªå·±çš„æ˜Ÿè¾°å¤§æµ·ã€‚æ— è®ºä½•æ—¶ï¼Œè®°å¾—ç…§é¡¾å¥½è‡ªå·±ï¼Œæ–°å¹´å¿«ä¹ï¼",
        "ä¸€ä»½ç¥ç¦ï¼Œä¸€ä»½ç‰µæŒ‚ã€‚åœ¨è¿™ä¸ªé‡‘é©¬è´ºå²çš„æ—¥å­é‡Œï¼Œæ„¿ä½ æ‰€æœ‰çš„æ¢¦æƒ³éƒ½èƒ½â€œé©¬ä¸Šâ€å¼€èŠ±ç»“æœã€‚æ„Ÿè°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œï¼Œç¥ä½ é©¬å¹´å‰ç¥¥ï¼Œå¹¸ç¦å®‰åº·ï¼Œå²å²å¹´å¹´å¸¸ç›¸è§ã€‚",
        "æ—§å²å·²å±•åƒé‡é”¦ï¼Œæ–°å¹´å†è¿›ç™¾å°ºç«¿ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæ”¶è·æ»¡æ»¡çš„å¹¸ç¦ã€‚ä¸ç®¡ä¸–ç•Œæ€ä¹ˆå˜ï¼Œæˆ‘çš„ç¥ç¦æ°¸è¿œä¸å˜ã€‚æ˜¥èŠ‚å¿«ä¹ï¼Œå¹³å®‰é¡ºé‚ï¼"
    ],
    'æ–‡è‰ºå”¯ç¾': [
        "æ˜¥é£å¾—æ„é©¬è¹„ç–¾ï¼Œä¸€æ—¥çœ‹å°½é•¿å®‰èŠ±ã€‚2026ä¸™åˆé©¬å¹´ï¼Œæ„¿ä½ é˜…å°½ä¸–é—´ç¾å¥½ï¼Œä¸è´ŸéŸ¶åã€‚åœ¨å¥”èµ´æœªæ¥çš„è·¯ä¸Šï¼Œæ—¢æœ‰ç­–é©¬æ‰¬é­çš„å‹‡æ°”ï¼Œä¹Ÿæœ‰è€é©¬è¯†é€”çš„æ™ºæ…§ã€‚æ–°å¹´å¿«ä¹ï¼ğŸŒ¸",
        "é‡‘é©¬è¸æ˜¥ï¼Œä¸‡ç‰©å¤è‹ã€‚æ„¿ä½ åœ¨è¿™ä¸ªç”Ÿæœºå‹ƒå‹ƒçš„å¹´ä»½é‡Œï¼Œå¦‚éªé©¬èˆ¬é©°éª‹ï¼Œè¶Šè¿‡å±±ä¸˜ï¼Œé‡è§å½©è™¹ã€‚æ„¿ä½ å†ç»åƒå¸†ï¼Œå½’æ¥ä»æ˜¯å°‘å¹´ï¼Œå¿ƒä¸­æœ‰æ¢¦ï¼Œçœ¼åº•æœ‰å…‰ã€‚",
        "é©¬è¹„è¸ç¢æ—§å¹´éœœï¼Œæ˜¥é£é€æ¥æ–°å²å…‰ã€‚æ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ å¿ƒæœ‰æš–é˜³ï¼Œä½•æƒ§é£éœœã€‚åœ¨æ—¶å…‰çš„æ—·é‡é‡Œï¼Œç­–é©¬å¥”è…¾ï¼Œä»¥æ­¤å¯ç¨‹ï¼Œå±±æ²³è¿œé˜”ï¼Œäººé—´å€¼å¾—ã€‚",
        "å²åºæ›´æ›¿ï¼Œåç« æ—¥æ–°ã€‚é©¬å¹´åˆ°äº†ï¼Œæ„¿ä½ æ‹¥æœ‰â€œéªéª¥ä¸€è·ƒâ€çš„çˆ†å‘åŠ›ï¼Œä¹Ÿæœ‰â€œé©½é©¬åé©¾â€çš„åšæŒã€‚è„šè¸å®åœ°ï¼Œç»ˆæŠµæ˜Ÿæ²³ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½å°†å¦‚æœŸè€Œè‡³ã€‚",
        "æ„¿ä½ æœ‰éªé©¬é©°éª‹çš„è‡ªç”±ï¼Œä¹Ÿæœ‰è€é©¬è¯†é€”çš„ä»å®¹ã€‚2026å¹´ï¼Œæ„¿ä½ ä¸”æ­Œä¸”è¡Œï¼Œä¸€è·¯ç”ŸèŠ±ã€‚å°†è¿‡å¾€çš„é—æ†¾åŒ–ä½œæ˜¥æ³¥ï¼Œæ»‹å…»å‡ºæ–°å¹´çš„ç¹èŠ±ä¼¼é”¦ã€‚",
        "çƒŸç«èµ·ï¼Œç…§äººé—´ï¼Œå–œæ‚¦æ— è¾¹ï¼Œä¸¾æ¯æ•¬æ­¤å¹´ã€‚é©¬å¹´æ–°æ˜¥ï¼Œæ„¿ä½ ä¸‰é¤å››å­£æ¸©æš–æœ‰è¶£ï¼Œç”Ÿæ´»å¦‚æ—‹è½¬æœ¨é©¬èˆ¬å……æ»¡æµªæ¼«ã€‚å¹³å®‰å–œä¹ï¼Œä¸‡äº‹èƒœæ„ï¼Œå–œä¹é•¿å®‰ã€‚",
        "å‡›å†¬æ•£å°½ï¼Œæ˜Ÿæ²³é•¿æ˜ã€‚åœ¨è¿™ä¸ªé©¬å¹´ï¼Œæ„¿ä½ ç­–é©¬æ‰¬é­ï¼Œå¥”èµ´å±±æµ·ã€‚ä¸æ‹è¿‡å¾€ï¼Œä¸ç•å°†æ¥ï¼Œåœ¨è‡ªå·±çš„èŠ‚å¥é‡Œï¼Œæ´»æˆè‡ªå·±å–œæ¬¢çš„æ ·å­ã€‚",
        "ä»¥æ¢¦ä¸ºé©¬ï¼Œä¸è´ŸéŸ¶åã€‚2026å¹´ï¼Œæ„¿ä½ åœ¨è¿½æ¢¦çš„è·¯ä¸Šï¼Œä¸€é©¬å½“å…ˆï¼Œé©¬åˆ°æˆåŠŸã€‚å³ä½¿å‰è·¯æ¼«æ¼«ï¼Œä¹Ÿè¦å‹‡å¾€ç›´å‰ï¼Œå› ä¸ºç¾å¥½çš„äº‹ç‰©éƒ½å€¼å¾—ç­‰å¾…ã€‚",
        "æ–°å¹´çš„é’Ÿå£°ï¼Œæ˜¯å¯ç¨‹çš„å·è§’ã€‚æ„¿ä½ å¦‚éªé©¬èˆ¬ï¼ŒæŒ£è„±æŸç¼šï¼Œå¥”å‘è‡ªç”±ã€‚æ„¿ä½ çš„ä¸–ç•Œï¼Œæ—¢æœ‰çƒŸç«ä¿—å¸¸ï¼Œä¹Ÿæœ‰è¯—æ„æ¸…æ¬¢ï¼Œé©¬å¹´å¤§å‰ï¼",
        "é²œè¡£æ€’é©¬å°‘å¹´æ—¶ï¼Œä¸è´ŸéŸ¶åè¡Œä¸”çŸ¥ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥ä½ æ„æ°”é£å‘ï¼Œå‰ç¨‹ä¼¼é”¦ã€‚æ„¿ä½ æ‰€æœ‰çš„åŠªåŠ›éƒ½ä¸è¢«è¾œè´Ÿï¼Œæ‰€æœ‰çš„æœŸå¾…éƒ½èƒ½è½åœ°ç”Ÿæ ¹ã€‚"
    ],
    'äº‹ä¸šæé’±': [
        "Xæ€»ï¼Œé©¬å¹´å¤§å‰ï¼ç»™æ‚¨å’Œå®¶äººæ‹œå¹´äº†ã€‚æ„Ÿè°¢è¿‡å»ä¸€å¹´å¯¹æˆ‘çš„ææºä¸ä¿¡ä»»ã€‚2026å¹´ï¼Œç¥æ‚¨ç­–é©¬æ‰¬é­å†åˆ›è¾‰ç…Œï¼Œäº‹ä¸šå¦‚éªé©¬å¥”è…¾ï¼ŒåŠ¿ä¸å¯æŒ¡ï¼æ„¿å…¬å¸ä¸šç»©ä¸€é©¬å½“å…ˆï¼Œè´¢æºä¸‡é©¬å¥”è…¾ï¼",
        "ç‹ç»ç†ï¼Œæ–°å¹´å¥½ï¼é‡‘é©¬è´ºå²ï¼Œå•†æœºæ— é™ã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„æ”¯æŒä¸å…³ç…§ã€‚ç¥æ‚¨é©¬å¹´è¡Œå¤§è¿ï¼Œè´¢è¿äº¨é€šï¼Œç”Ÿæ„å…´éš†ï¼æ„¿æˆ‘ä»¬åœ¨æ–°çš„ä¸€å¹´é‡Œç»§ç»­å¹¶é©¾é½é©±ï¼Œæºæ‰‹å…±èµ¢ï¼",
        "äº²çˆ±çš„åŒäº‹ï¼Œé©¬å¹´å¿«ä¹ï¼è¿‡å»ä¸€å¹´ï¼Œæ„Ÿè°¢æœ‰ä½ å¹¶è‚©ä½œæˆ˜ã€‚2026å¹´ï¼Œæ„¿æˆ‘ä»¬å·¥ä½œä¸Šä¸€é©¬å½“å…ˆï¼Œé…åˆé»˜å¥‘ï¼›ç”Ÿæ´»ä¸Šé¾™é©¬ç²¾ç¥ï¼Œå¤šå§¿å¤šå½©ã€‚ç¥ä½ å‡èŒåŠ è–ªâ€œé©¬ä¸Šâ€å…‘ç°ï¼Œå¹´ç»ˆå¥–æ‹¿åˆ°æ‰‹è½¯ï¼",
        "åˆ›ä¸šä¼™ä¼´ï¼Œæ–°æ˜¥å¿«ä¹ï¼å‰å…µç§£é©¬åˆä¸€å¹´ï¼Œé©¬å¹´æ˜¯æˆ‘ä»¬å¤§å±•å®å›¾çš„å¥½æ—¶æœºã€‚æ„¿ä½ åœ¨å•†æµ·ä¸­ç­–é©¬å¥”è…¾ï¼Œç‹¬å é³Œå¤´ï¼æ‰€æœ‰çš„é¡¹ç›®éƒ½é©¬åˆ°æˆåŠŸï¼Œæ‰€æœ‰çš„ä»˜å‡ºéƒ½èƒ½æ¢æ¥ä¸°åšçš„å›æŠ¥ã€‚",
        "ç¥ä½ é©¬å¹´äº‹ä¸šæ­¥æ­¥é«˜å‡ï¼2026å¹´ï¼Œæ„¿ä½ èŒåœºä¹‹è·¯ä¸€é©¬å¹³å·ï¼Œæ²¡æœ‰åå·ã€‚é‡åˆ°å¥½æœºé‡è¦ä¸€é©¬å½“å…ˆï¼ŒæŠ“ä½å¥½è¿æ°”è¦é©¬ä¸åœè¹„ã€‚æ„¿ä½ æ—©æ—¥å®ç°è´¢å¯Œè‡ªç”±ï¼Œäº‹ä¸šçˆ±æƒ…åŒä¸°æ”¶ï¼",
        "é©¬å¹´åˆ°ï¼Œå¥½è¿ç…§ï¼ç¥ä½ åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œä¸šç»©çªé£çŒ›è¿›ï¼Œèƒ½åŠ›ä¸€æ—¥åƒé‡Œã€‚åœ¨è¿™ä¸ªå……æ»¡æ´»åŠ›çš„å¹´ä»½é‡Œï¼Œæ„¿ä½ é©¬åŠ›å…¨å¼€ï¼Œæå®šæ‰€æœ‰éš¾é¢˜ï¼Œæˆä¸ºè¡Œä¸šé‡Œçš„åƒé‡Œé©¬ï¼",
        "å¼€å·¥å¤§å‰ï¼ˆé¢„ç¥ï¼‰ï¼é©¬å¹´æ–°æ°”è±¡ï¼Œæ„¿ä½ åœ¨å·¥ä½œä¸­å¦‚é±¼å¾—æ°´ï¼Œå¦‚éªé©¬å¥”è…¾ã€‚ä¸ä»…è¦â€œé©¬â€ä¸Šæœ‰é’±ï¼Œæ›´è¦â€œé©¬â€ä¸Šæœ‰é—²ã€‚ç¥ä½ å·¥ä½œé¡ºåˆ©ï¼Œèº«ä½“å¥åº·ï¼Œä¸‡äº‹é¡ºå¿ƒï¼",
        "è‡´æ­£åœ¨æ±‚èŒçš„ä½ ï¼šé©¬å¹´æ˜¯è½¬è¿å¹´ï¼æ„¿ä½ åƒåƒé‡Œé©¬ä¸€æ ·ï¼Œæ—©æ—¥é‡åˆ°èµè¯†ä½ çš„ä¼¯ä¹ã€‚æ±‚èŒä¹‹è·¯ä¸€é©¬å¹³å·ï¼Œé¢è¯•é‚€çº¦é©¬ä¸åœè¹„ï¼Œæ—©æ—¥æ‹¿åˆ°å¿ƒä»ªçš„Offerï¼Œå¼€å¯äººç”Ÿæ–°ç¯‡ç« ï¼",
        "ç”µå•†åŒè¡Œï¼Œé©¬å¹´å‘è´¢ï¼ç¥ä½ åº—é“ºæµé‡ä¸€é©¬å½“å…ˆï¼Œé”€é‡ä¸‡é©¬å¥”è…¾ã€‚æ‰€æœ‰çš„çˆ†æ¬¾éƒ½â€œé©¬ä¸Šâ€å‡ºï¼Œæ‰€æœ‰çš„è®¢å•éƒ½â€œé©¬ä¸Šâ€å‘ã€‚æ„¿ä½ 2026å¹´èµšå¾—ç›†æ»¡é’µæ»¡ï¼",
        "è‡ªç”±èŒä¸šè€…ï¼Œæ–°å¹´å¿«ä¹ï¼é©¬å¹´æ„¿ä½ çµæ„Ÿå¦‚æ³‰æ¶Œï¼Œå®¢æˆ·æ’é˜Ÿæ¥ã€‚æ„¿ä½ ç­–é©¬å¥”è…¾åœ¨è‡ªç”±çš„èŒä¸šå¤©åœ°é‡Œï¼Œæ”¶å…¥ç¿»å€ï¼Œæ—¶é—´è‡ªç”±ï¼Œæ´»æˆè‡ªå·±æœ€å–œæ¬¢çš„æ ·å­ï¼"
    ],
    'é•¿è¾ˆå®‰åº·': [
        "çˆ¸å¦ˆï¼Œé©¬å¹´å¿«ä¹ï¼ä»Šå¤©æ˜¯å¤§å¹´åˆä¸€ï¼Œå­©å„¿ç»™äºŒè€æ‹œå¹´äº†ã€‚ä¸™åˆå¹´è±¡å¾ç€æ´»åŠ›ä¸å¥åº·ï¼Œæ„¿è¿™è‚¡ç‘æ°”æ°¸è¿œå›´ç»•ç€ä½ ä»¬ã€‚å¸Œæœ›çˆ¸å¦ˆé¾™é©¬ç²¾ç¥ï¼Œèº«ä½“ç¡¬æœ—ï¼Œåƒå¾—é¦™ç¡å¾—å¥½ï¼Œæˆ‘åœ¨å¤–ä¸€åˆ‡éƒ½å¥½ï¼Œå‹¿å¿µï¼",
        "çˆ·çˆ·å¥¶å¥¶ï¼Œç»™æ‚¨äºŒè€ç£•å¤´æ‹œå¹´å•¦ï¼é©¬è¹„å£°å£°æŠ¥å¹³å®‰ï¼Œç‘é›ªçº·é£å…†ä¸°å¹´ã€‚é©¬å¹´åˆ°äº†ï¼Œç¥æ‚¨ç¦å¦‚ä¸œæµ·é•¿æµæ°´ï¼Œå¯¿æ¯”å—å±±ä¸è€æ¾ã€‚æ„¿æ‚¨äºŒè€ç²¾ç¥çŸé“„ï¼Œç¬‘å£å¸¸å¼€ï¼Œæ¯å¤©éƒ½å¼€å¼€å¿ƒå¿ƒï¼",
        "å”å”é˜¿å§¨ï¼Œæ–°å¹´å¥½ï¼é‡‘é©¬è´ºå²ï¼Œå–œæ°”æ´‹æ´‹ã€‚ç¥æ‚¨å…¨å®¶é©¬å¹´å¤§å‰å¤§åˆ©ï¼æ–°çš„ä¸€å¹´ï¼Œæ„¿æ‚¨èº«ä½“åº·å¥ï¼Œé¾™é©¬ç²¾ç¥ï¼›äº‹ä¸šé¡ºå¿ƒï¼Œé©¬åˆ°æˆåŠŸï¼›å®¶åº­å’Œç¦ï¼Œå…¶ä¹èèã€‚æ„Ÿè°¢æ‚¨ä¸€ç›´ä»¥æ¥çš„å…³å¿ƒï¼",
        "å¤–å…¬å¤–å©†ï¼Œæ˜¥èŠ‚å¿«ä¹ï¼é©¬å¹´åˆ°äº†ï¼Œç»™æ‚¨é€æ¥æœ€çœŸæŒšçš„ç¥ç¦ã€‚æ„¿æ‚¨äºŒè€åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œè…¿è„šçµä¾¿ï¼Œåƒéªé©¬ä¸€æ ·æœ‰æ´»åŠ›ã€‚æƒ³åƒå•¥å°±åƒå•¥ï¼Œæƒ³ç©å•¥å°±ç©å•¥ï¼Œå²æœˆé™å¥½ï¼Œå¥åº·å¸¸ä¼´ï¼",
        "èˆ…èˆ…ï¼Œé©¬å¹´å‰ç¥¥ï¼ç¥æ‚¨å’Œèˆ…å¦ˆæ–°æ˜¥å¿«ä¹ï¼Œé˜–å®¶å¹¸ç¦ã€‚æ„¿æ‚¨åœ¨2026å¹´ï¼Œç”Ÿæ„å…´éš†é€šå››æµ·ï¼Œè´¢æºèŒ‚ç››è¾¾ä¸‰æ±Ÿã€‚èº«ä½“å¥å¥åº·åº·ï¼Œå¿ƒæƒ…èˆ’èˆ’ç•…ç•…ï¼Œä¸‡äº‹çš†å¦‚æ„ï¼",
        "å§‘å§‘ï¼Œè¿‡å¹´å¥½ï¼é‡‘é©¬çº³ç¦ï¼Œå¥½è¿è¿è¿ã€‚ç¥æ‚¨é©¬å¹´è¡Œå¤§è¿ï¼Œèº«ä½“å€å„¿æ£’ï¼Œæ°”è‰²çº¢æ¶¦ã€‚æ„¿æ‚¨çš„é€€ä¼‘ç”Ÿæ´»ä¸°å¯Œå¤šå½©ï¼Œåƒåƒé‡Œé©¬ä¸€æ ·é©°éª‹åœ¨å¿«ä¹çš„è‰åŸä¸Šï¼Œå»æƒ³å»çš„åœ°æ–¹ï¼Œçœ‹æƒ³çœ‹çš„é£æ™¯ã€‚",
        "è‡´å°Šæ•¬çš„é•¿è¾ˆï¼šæ–°æ˜¥ä½³èŠ‚ï¼Œç»™æ‚¨æ‹œå¹´äº†ã€‚ç¥æ‚¨é©¬å¹´é¾™é©¬ç²¾ç¥ï¼Œç¦å¯¿å®‰åº·ã€‚æ„¿æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œè¿œç¦»ç–¾ç—…ï¼Œè¿œç¦»çƒ¦æ¼ï¼Œå„¿å­™ç»•è†ï¼Œå°½äº«å¤©ä¼¦ä¹‹ä¹ã€‚2026å¹´ï¼Œå¹³å®‰å–œä¹ï¼",
        "è€å¸ˆï¼Œé©¬å¹´å¿«ä¹ï¼æ„Ÿè°¢æ‚¨çš„è°†è°†æ•™è¯²ï¼Œæ‚¨è¾›è‹¦äº†ã€‚ç¥æ‚¨åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œæ¡ƒææ»¡å¤©ä¸‹ï¼Œæ˜¥æ™–éå››æ–¹ã€‚æ„¿æ‚¨èº«ä½“ç¡¬æœ—ï¼Œç²¾ç¥é¥±æ»¡ï¼Œç»§ç»­åœ¨æ•™è‚²çš„è‰åŸä¸Šç­–é©¬å¥”è…¾ï¼ŒåŸ¹è‚²æ›´å¤šåƒé‡Œé©¬ï¼",
        "é€€ä¼‘çš„å¤§ä¼¯ï¼Œæ–°å¹´å¥½ï¼é©¬å¹´åˆ°äº†ï¼Œç¥æ‚¨é€€ä¼‘ç”Ÿæ´»æ›´åŠ ç²¾å½©ã€‚æ„¿æ‚¨é¾™é©¬ç²¾ç¥ï¼Œç§¯æä¹è§‚ã€‚æ²¡äº‹å…»å…»èŠ±ã€é›é›é¸Ÿï¼Œäº«å—æ‚ é—²æ—¶å…‰ã€‚ç¥æ‚¨ç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ï¼",
        "è‡´å®¶æ—é•¿è¾ˆï¼šé‡‘é©¬è¿æ˜¥ï¼Œç¦æ°”ç›ˆé—¨ã€‚åœ¨è¿™ä¸ªå–œåº†çš„æ—¥å­é‡Œï¼Œç¥æ‚¨å’Œå®¶äººé©¬å¹´å¤§å‰ï¼æ„¿æ‚¨èº«ä½“å®‰åº·ï¼Œç²¾ç¥çŸé“„ï¼›å®¶åº­å’Œç¦ï¼Œä¸‡äº‹å…´æ—ºã€‚æ„¿æ‚¨å²å²æœ‰ä»Šæœï¼Œå¹´å¹´å¦‚ä»Šæ—¥ï¼"
    ]
}

# åˆ†ç±»åç§°åˆ—è¡¨ï¼ˆä¸Spinneré€‰é¡¹ä¸€è‡´ï¼‰
CATEGORIES = list(BLESSINGS.keys())

class StartScreen(Screen):
    """å¯åŠ¨ç”»é¢ï¼Œæ˜¾ç¤ºstart.pngï¼Œç‚¹å‡»æˆ–ç­‰å¾…3ç§’è¿›å…¥ä¸»é¡µé¢"""
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        # ä½¿ç”¨FloatLayoutå¸ƒå±€å…¨å±
        layout = BoxLayout(orientation='vertical')
        # èƒŒæ™¯å›¾ç‰‡
        img = Image(source='images/start.png', allow_stretch=True, keep_ratio=False)
        layout.add_widget(img)
        # é€æ˜æŒ‰é’®è¦†ç›–å…¨å±ï¼Œç”¨äºç‚¹å‡»è·³è½¬
        btn = Button(background_color=(0,0,0,0), on_press=self.go_main)
        layout.add_widget(btn)
        self.add_widget(layout)
        # 3ç§’åè‡ªåŠ¨è·³è½¬
        Clock.schedule_once(self.go_main, 3)

    def go_main(self, *args):
        self.manager.current = 'main'

class MainScreen(Screen):
    """ä¸»æ“ä½œé¡µé¢ï¼šåˆ†ç±»ä¸‹æ‹‰ã€åˆ†é¡µæµè§ˆã€å¤åˆ¶ç¥ç¦ã€å‘é€ç¥ç¦"""
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.current_category = CATEGORIES[0]   # é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªåˆ†ç±»
        self.current_page = 0                    # å½“å‰é¡µç ï¼ˆæ¯é¡µ5æ¡ï¼‰
        self.total_pages = 2                      # æ¯ä¸ªåˆ†ç±»å›ºå®š10æ¡ï¼Œåˆ†2é¡µ

        # ä¸»å¸ƒå±€ï¼ˆå‚ç›´ï¼‰
        main_layout = BoxLayout(orientation='vertical', spacing=dp(10), padding=dp(15))

        # é¡¶éƒ¨ï¼šåˆ†ç±»ä¸‹æ‹‰é€‰æ‹©
        self.spinner = Spinner(
            text=CATEGORIES[0],
            values=CATEGORIES,
            size_hint=(1, None),
            height=dp(50),
            background_color=get_color_from_hex('#8B4513'),  # é©¬æ£•è‰²
            color=(1,1,1,1)
        )
        self.spinner.bind(text=self.on_category_change)
        main_layout.add_widget(self.spinner)

        # ä¸­é—´åŒºåŸŸï¼šç¿»é¡µæŒ‡ç¤º + ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®
        page_layout = BoxLayout(size_hint=(1, None), height=dp(40))
        self.prev_btn = Button(text='ä¸Šä¸€é¡µ', on_press=self.prev_page, disabled=True)
        self.page_label = Label(text='ç¬¬1é¡µ/å…±2é¡µ')
        self.next_btn = Button(text='ä¸‹ä¸€é¡µ', on_press=self.next_page)
        page_layout.add_widget(self.prev_btn)
        page_layout.add_widget(self.page_label)
        page_layout.add_widget(self.next_btn)
        main_layout.add_widget(page_layout)

        # ç¥ç¦è¯­åˆ—è¡¨åŒºåŸŸï¼ˆå¯æ»šåŠ¨ï¼‰
        self.scroll_view = ScrollView()
        self.list_layout = BoxLayout(orientation='vertical', size_hint_y=None, spacing=dp(8))
        self.list_layout.bind(minimum_height=self.list_layout.setter('height'))
        self.scroll_view.add_widget(self.list_layout)
        main_layout.add_widget(self.scroll_view)

        # åº•éƒ¨ï¼šå‘é€ç¥ç¦æŒ‰é’®ï¼ˆå¤åˆ¶å½“å‰é¡µæ‰€æœ‰ç¥ç¦ï¼‰
        send_btn = Button(
            text='å‘é€ç¥ç¦',
            size_hint=(1, None),
            height=dp(50),
            background_color=get_color_from_hex('#DAA520'),
            color=(1,1,1,1)
        )
        send_btn.bind(on_press=self.send_blessings)
        main_layout.add_widget(send_btn)

        self.add_widget(main_layout)

        # åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€é¡µ
        self.show_current_page()

    def on_category_change(self, spinner, text):
        """åˆ†ç±»åˆ‡æ¢æ—¶é‡ç½®ä¸ºç¬¬ä¸€é¡µ"""
        self.current_category = text
        self.current_page = 0
        self.update_page_buttons()
        self.show_current_page()

    def show_current_page(self):
        """æ ¹æ®å½“å‰åˆ†ç±»å’Œé¡µç åˆ·æ–°ç¥ç¦åˆ—è¡¨"""
        self.list_layout.clear_widgets()
        blessings = BLESSINGS[self.current_category]
        start = self.current_page * 5
        end = start + 5
        page_items = blessings[start:end]

        for idx, text in enumerate(page_items):
            # æ¯ä¸ªç¥ç¦æ¡ç›®ï¼šæ°´å¹³å¸ƒå±€ï¼Œå·¦ä¾§æ–‡æœ¬ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰ï¼Œå³ä¾§å¤åˆ¶æŒ‰é’®
            item_box = BoxLayout(orientation='horizontal', size_hint_y=None, spacing=dp(5))
            # æ–‡æœ¬æ ‡ç­¾ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼Œé«˜åº¦è‡ªé€‚åº”ï¼‰
            label = Label(
                text=text,
                size_hint_x=0.8,
                size_hint_y=None,
                text_size=(None, None),  # ç¨åç»‘å®šå®½åº¦
                halign='left',
                valign='top',
                color=(0.1,0.1,0.1,1),
                markup=True
            )
            # å…³é”®ï¼šè®©æ ‡ç­¾è‡ªåŠ¨æ¢è¡Œä¸”é«˜åº¦é€‚åº”å†…å®¹
            label.bind(
                width=lambda *x: label.setter('text_size')(label, (label.width, None)),
                texture_size=lambda *x: setattr(label, 'height', label.texture_size[1] + dp(10))
            )
            # å¤åˆ¶æŒ‰é’®
            copy_btn = Button(
                text='ğŸ“‹',
                size_hint_x=0.2,
                size_hint_y=None,
                height=dp(40),
                background_normal='',
                background_color=(0.2,0.6,1,1)
            )
            # ç»‘å®šå¤åˆ¶åŠŸèƒ½ï¼Œä¼ é€’å½“å‰æ–‡æœ¬
            copy_btn.bind(on_press=lambda btn, t=text: self.copy_to_clipboard(t))

            item_box.add_widget(label)
            item_box.add_widget(copy_btn)

            # è®©item_boxçš„é«˜åº¦ä¸labelä¸€è‡´ï¼ˆåŠ ä¸Šå†…è¾¹è·ï¼‰
            label.bind(height=lambda *x: setattr(item_box, 'height', label.height + dp(10)))
            self.list_layout.add_widget(item_box)

    def copy_to_clipboard(self, text):
        """å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿å¹¶å¼¹å‡ºæç¤º"""
        Clipboard.copy(text)
        if toast:
            toast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
        else:
            # ç®€å•å¼¹çª—ï¼ˆä½¿ç”¨Popupå¤ªéº»çƒ¦ï¼Œè¿™é‡Œç”¨æ§åˆ¶å°ä»£æ›¿ï¼Œå®é™…å®‰å“ä¼šèµ°plyerï¼‰
            print('å¤åˆ¶æˆåŠŸ:', text)

    def prev_page(self, instance):
        if self.current_page > 0:
            self.current_page -= 1
            self.update_page_buttons()
            self.show_current_page()

    def next_page(self, instance):
        if self.current_page < self.total_pages - 1:
            self.current_page += 1
            self.update_page_buttons()
            self.show_current_page()

    def update_page_buttons(self):
        """æ›´æ–°ç¿»é¡µæŒ‰é’®çŠ¶æ€å’Œé¡µç æ˜¾ç¤º"""
        self.prev_btn.disabled = (self.current_page == 0)
        self.next_btn.disabled = (self.current_page == self.total_pages - 1)
        self.page_label.text = f'ç¬¬{self.current_page+1}é¡µ/å…±{self.total_pages}é¡µ'

    def send_blessings(self, instance):
        """å‘é€ç¥ç¦ï¼šå¤åˆ¶å½“å‰é¡µæ‰€æœ‰ç¥ç¦è¯­ï¼ˆç”¨æ¢è¡Œåˆ†éš”ï¼‰å¹¶æç¤º"""
        blessings = BLESSINGS[self.current_category]
        start = self.current_page * 5
        end = start + 5
        page_items = blessings[start:end]
        full_text = '\n---\n'.join(page_items)  # ç”¨åˆ†éš”çº¿è¿æ¥
        Clipboard.copy(full_text)
        if toast:
            toast('å·²å¤åˆ¶å½“å‰é¡µæ‰€æœ‰ç¥ç¦')
        else:
            print('å¤åˆ¶å½“å‰é¡µæ‰€æœ‰ç¥ç¦:\n', full_text)

class BlessApp(App):
    def build(self):
        # è®¾ç½®çª—å£åˆå§‹å¤§å°ï¼ˆæ–¹ä¾¿å¼€å‘ï¼Œä¸å½±å“æ‰‹æœºï¼‰
        Window.size = (400, 800)
        sm = ScreenManager()
        sm.add_widget(StartScreen(name='start'))
        sm.add_widget(MainScreen(name='main'))
        return sm

if __name__ == '__main__':
    BlessApp().run()